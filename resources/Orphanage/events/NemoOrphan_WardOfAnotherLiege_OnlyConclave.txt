# This text file is a mod script file which uses by the Crusader Kings 2
# Namespace              : OPG
# Reserved Event ID      : 4000~4299
# Suitable CK2 Version   : 2.5.x
# Recently Modified Date : 2016-04-28

namespace = OPG

#==============================================================================#
# 가신이나 봉신에게 맡겨진 고아의 성장 및 양육                                 #
#------------------------------------------------------------------------------#
# 고아에게 보호자를 지정함으로써 다른 가신이나 봉신에게 고아를 맡길 수 있다.   #
# 이 경우 해당 봉신이나 가신의 특성에 따라서 특별한 이벤트가 발생할 수 있다.   #
# 이 이벤트들은 Conclave DLC 가 실행되고 있어야만 동작한다.                    #
#==============================================================================#


#------------------------------------------------------------------------------#
# 첫 고아가 5살이 됨 (4001~4005) - 고아원에 두는 고아와 봉신에게 맡겨진 고아   #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4001
	hide_window = yes

	ai = no

	trigger = {

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# Conclave DLC 가 필요함                                               #
		#----------------------------------------------------------------------#

		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 일반 상태의 플레이어 확인                                            #
		#----------------------------------------------------------------------#

		is_common_player_trigger = yes

		#----------------------------------------------------------------------#
		# 건물 : 최소한 고아원 레벨 1 이상의 고아원 건물이 필요                #
		#----------------------------------------------------------------------#

		OR = {
			has_orphanage_level_1_trigger = yes
			has_orphanage_level_2_trigger = yes
			has_orphanage_level_3_trigger = yes
			has_orphanage_level_4_trigger = yes
		}

		#----------------------------------------------------------------------#
		# 현재 고아원에 5세 이상의 고아가 한 명이라도 존재할 것                #
		#----------------------------------------------------------------------#

		any_realm_character = {
			OR = {
				trait = rescued_orphan_by_ai
				trait = rescued_orphan_by_player
			}
			age = 5
			is_adult = no
		}

		#----------------------------------------------------------------------#
		# 고아원 보모가 존재하며, 어디 안 갔을 것                              #
		#----------------------------------------------------------------------#

		is_orphanage_nurse_in_capital_trigger = yes

		#----------------------------------------------------------------------#
		# 이 알림 이벤트가 실행된 적이 없을 것                                 #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_EVENT_03
		NOT = { has_global_flag = MOD_NEMO_OPG_EVENT_04 }
	}

	mean_time_to_happen = {
		days = 14
	}

	immediate = {
		random_realm_character = {
			limit = {
				is_orphanage_nurse_trigger = yes
			}
			hidden_tooltip = {
				character_event = {
					id = OPG.4002
				}
			}			
		}
	}
}

character_event = {
	id = OPG.4002
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = {
			hidden_tooltip = {
				character_event = {
					id = OPG.4003
				}
			}	
		}
	}
}

character_event = {
	id = OPG.4003
	desc = EVTDESC_OPG_4003
	picture = GFX_evt_nemo_default_orphanage

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4003
		hidden_tooltip = {
			ROOT = {
				set_global_flag = MOD_NEMO_OPG_EVENT_04
				clr_global_flag = MOD_NEMO_OPG_EVENT_03

				character_event = {
					id = OPG.4004
				}
			}
		}
	}
}

character_event = {
	id = OPG.4004
	desc = EVTDESC_OPG_4004
	picture = GFX_evt_nemo_default_orphanage

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTA_OPG_4004
		hidden_tooltip = {
			ROOT = {
				character_event = {
					id = OPG.4005
				}
			}
		}
	}
}

character_event = {
	id = OPG.4005
	desc = EVTDESC_OPG_4005
	picture = GFX_evt_nemo_default_orphanage

	is_triggered_only = yes
	show_from_from_from = yes

	option = {
		name = EVTOPTA_OPG_4005
	}
}

#------------------------------------------------------------------------------#
# 고아가 봉신이나 가신에게 맡겨짐 (4011~4013) : 고아 기준 이벤트               #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4011
	hide_window = yes

	min_age = 6
	max_age = 16

	trigger = {

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# Conclave DLC 가 필요함                                               #
		#----------------------------------------------------------------------#

		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 6세 이상의 미성년 고아로서, 플레이어 이외의 자에게 맡겨진 경우       #
		#----------------------------------------------------------------------#

		OR = {
			trait = rescued_orphan_by_ai
			trait = rescued_orphan_by_player
		}
		age = 6
		is_adult = no

		liege = {
			ai = no
		}
		is_orphan_in_orphanage_trigger = no

		#----------------------------------------------------------------------#
		# 이 이벤트가 실행된 적이 없을 것                                      #
		#----------------------------------------------------------------------#

		NOT = { has_character_flag = mod_event_character_flag_guardian_selected_orphan }
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {

		#----------------------------------------------------------------------#
		# 시스템상 가신/봉신에게 맡길 수 없는 캐릭터도 보호자를 지정할 수 있으 #
		# 므로, 이런 캐릭터가 넘어왔다면 튕겨줘야 한다.                        #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				OR = {
					is_orphan_pending_special_event_trigger = yes
					is_under_special_training_for_orphan_trigger = yes
				}
			}
			remove_guardian = yes
			break = yes
		}

		#----------------------------------------------------------------------#
		# 맡을지 말지를 결정하기 위해 보호자에게 이벤트를 실행                 #
		#----------------------------------------------------------------------#

		educator = {
			character_event = {
				id = OPG.4012
			}
		}
	}
}

character_event = {
	id = OPG.4012
	hide_window = yes

	is_triggered_only = yes

	# ROOT : 보호자, FROM : 고아

	immediate = {

		#----------------------------------------------------------------------#
		# 봉신 또는 가신은 이 고아를 계속 맡을지의 여부를 결정한다.            #
		#----------------------------------------------------------------------#

		random_list = {

			#------------------------------------------------------------------#
			# 기본 70% : 고아에 대한 후견을 승낙한다.                          #
			#  다만, 항상 거절 플래그를 가지고 있는 경우 항상 거절된다.        #
			#------------------------------------------------------------------#

			70 = {
				modifier = {
					factor = 0
					has_character_flag = mod_event_character_flag_npc_refuse_to_be_guardian_of_orphan
				}
				liege = {
					hidden_tooltip = {
						character_event = {
							id = OPG.4013
						}
					}	
				}
			}

			#------------------------------------------------------------------#
			# 기본 30% : 고아에 대한 후견을 거절한다.                          #
			#------------------------------------------------------------------#

			30 = {
				modifier = {
					factor = 1.5
					NOT = { opinion = { who = liege value = 0 } }
				}
				modifier = {
					factor = 1.5
					NOT = { opinion = { who = liege value = -30 } }
				}
				modifier = {
					factor = 1.5
					NOT = { opinion = { who = liege value = -60 } }
				}

				liege = {
					hidden_tooltip = {
						character_event = {
							id = OPG.4014
						}
					}	
				}
			}
		}
	}
}

character_event = {
	id = OPG.4013
	desc = EVTDESC_OPG_4013
	picture = GFX_evt_nemo_orphan_has_new_guardian

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4013
		#hidden_tooltip = {
			ROOT = {
				piety = 1
			}
			FROM = {
				save_event_target_as = mod_event_target_scope_from
				piety = 1
			}
			FROMFROM = {
				set_character_flag = mod_event_character_flag_guardian_selected_orphan

				if = {
					limit = {
						has_character_flag = mod_event_character_flag_secret_agent
						OR = {
							has_character_flag = mod_event_character_flag_implicated_in_intrigue_murder
							has_character_flag = mod_event_character_flag_implicated_in_intrigue_discord
							has_character_flag = mod_event_character_flag_implicated_in_intrigue_gathering
						}
					}
					opinion = {
						who = event_target:mod_event_target_scope_from
						modifier = opinion_mod_orphans_target_of_intrigue
					}

					## 임무 돌입

					character_event = {
						id = OPG.7121
						days = 60
					}
				}

				piety = 1
			}

			clear_event_target = mod_event_target_scope_from
		#}
	}
}

character_event = {
	id = OPG.4014
	desc = EVTDESC_OPG_4014
	picture = GFX_evt_nemo_orphan_return_to_orphanage

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4014
		ROOT = {
			prestige = -10
		}
		hidden_tooltip = {
			FROMFROM = {
				move_character = ROOT
				remove_guardian = yes
			}
		}
	}
}

#------------------------------------------------------------------------------#
# 봉신/가신에게 맡겨졌던 고아가 고아원에 되돌아옴 (4016~4020):고아 기준 이벤트 #
# - 적절한 절차 없이 고아가 고아원에 되돌아온(보호자 관계가 해제된) 경우 이를  #
#   수정하기 위한 이벤트                                                       #
# - 4018 은 Triggered Event 로 실행되며, 알 수 없는 이유로 보호관계가 해제된   #
#   경우에 실행된다.                                                           #
# - 4016 은 디시전에서 트리거되는 이벤트로, 플레이어의 지시로 보호관계를 해제  #
#   하는 경우에 실행된다.                                                      #
# - 4016 -> 4017 -> 4019 -> 4020, 4018 -> 4019 -> 4020 을 사용한다.            #
#------------------------------------------------------------------------------#

character_event = {
	id = OPG.4016
	hide_window = yes

	# ROOT : 플레이어

	is_triggered_only = yes

	immediate = {
		FROM = {
			character_event = {
				id = OPG.4017
			}
		}
	}
}

character_event = {
	id = OPG.4017
	hide_window = yes

	# ROOT : 선택된 고아

	is_triggered_only = yes

	immediate = {

		#----------------------------------------------------------------------#
		# 고아는 고아원으로 돌아온다                                           #
		#----------------------------------------------------------------------#

		clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
		clear_flag_modifier_orphan_under_guardianship_effect = yes
		remove_orphan_character_relative_opinion_intrigue_modifier_effect = yes

		remove_guardian = yes
		move_character = FROM

		#----------------------------------------------------------------------#
		# 형식적으로 4019 를 거치도록 한다.                                    #
		#----------------------------------------------------------------------#

		FROM = {
			character_event = {
				id = OPG.4019
				days = 1
			}
		}
	}
}

#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4018
	hide_window = yes

	min_age = 6
	max_age = 16
	has_character_flag = mod_event_character_flag_guardian_selected_orphan

	trigger = {

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# Conclave DLC 가 필요함                                               #
		#----------------------------------------------------------------------#

		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 6세 이상의 미성년 고아로서, 가신이나 봉신에게 맡겨졌다가 이것이 일반 #
		# 적인 이유로 보호자관계가 해제된 경우                                 #
		#----------------------------------------------------------------------#

		OR = {
			trait = rescued_orphan_by_ai
			trait = rescued_orphan_by_player
		}
		age = 6
		is_adult = no

		liege = {
			ai = no
		}
		is_orphan_in_orphanage_trigger = yes
		has_character_flag = mod_event_character_flag_guardian_selected_orphan
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		
		clear_flag_modifier_orphan_under_guardianship_effect = yes
		clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
		remove_orphan_character_relative_opinion_intrigue_modifier_effect = yes

		educator = {
			character_event = {
				id = OPG.4019
			}
		}
	}
}

character_event = {
	id = OPG.4019
	hide_window = yes

	# ROOT : 교육자 (플레이어, 보모 또는 섭정)

	is_triggered_only = yes

	immediate = {

		#----------------------------------------------------------------------#
		# Educator 가 보모 또는 섭정인 경우                                    #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				OR = {
					is_orphanage_nurse_trigger = yes
					has_minor_title = title_regent
				}
			}
			liege = {
				character_event = {
					id = OPG.4020
				}
			}
			break = yes
		}

		#----------------------------------------------------------------------#
		# 그 외의 경우 (아마도 플레이어)                                       #
		#----------------------------------------------------------------------#

		hidden_tooltip = {
			character_event = {
				id = OPG.4020
			}
		}
	}
}

character_event = {
	id = OPG.4020
	desc = {
		text = EVTDESC_OPG_4020_N
		trigger = {
			NOT = { has_character_flag = mod_event_pending_flag_player_taken_orphan_to_orphanage }
		}
	}
	desc = {
		text = EVTDESC_OPG_4020_O
		trigger = {
			has_character_flag = mod_event_pending_flag_player_taken_orphan_to_orphanage
		}
	}
	picture = GFX_evt_nemo_orphan_return_to_orphanage

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_OPG_4020

		hidden_tooltip = {
			if = {
				limit = {
					has_character_flag = mod_event_pending_flag_player_taken_orphan_to_orphanage
				}
				clr_character_flag = mod_event_pending_flag_player_taken_orphan_to_orphanage
			}		
		}
	}
}


#------------------------------------------------------------------------------#
# 봉신/가신에게 맡겨진 고아 이벤트 메인 (4021) : On-Actions 이벤트             #
# - 고아가 봉신/가신에게 맡겨져 있는 동안 매년 1회 발생한다.                   #
# - 이 이벤트의 결과는 따로 플레이어에게 보여지지 않는다.                      #
#   (단, 양자 입양의 경우만 제외)                                              #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4021
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan

	trigger = {

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# Conclave DLC 가 필요함                                               #
		#----------------------------------------------------------------------#

		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 현재 플레이어가 주군 상태인, 가신 혹은 봉신에게 맡겨진 고아          #
		#----------------------------------------------------------------------#
		
		OR = {
			trait = rescued_orphan_by_player
			trait = rescued_orphan_by_ai
		}

		is_liege_human_player_character_trigger = yes

		age = 6
		is_adult = no

		is_orphan_in_orphanage_trigger = no

		educator = {
			is_common_adult_npc_trigger = yes
		}

		has_character_flag = mod_event_character_flag_guardian_selected_orphan
	}

	immediate = {
		random_list = {
			
			#------------------------------------------------------------------#
			# 아무 이벤트도 일어나지 않는다                                    #
			#------------------------------------------------------------------#

			100 = {
				modifier = {
					factor = 10
					educator = {
						trait = slothful
					}
				}
				modifier = {
					factor = 0.1
					educator = {
						trait = diligent
					}
				}
			}

			#------------------------------------------------------------------#
			# 일반적 수련 이벤트 (~11세)                                       #
			#------------------------------------------------------------------#

			45 = {
				modifier = {
					factor = 0
					age = 12
				}
				educator = {
					character_event = {
						id = OPG.4031
					}
				}
			}

			#------------------------------------------------------------------#
			# 관심사 교육 (~11세)                                              #
			#------------------------------------------------------------------#

			45 = {
				modifier = {
					factor = 1.5
					educator = {
						trait = diligent
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = kind
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = patient
					}
				}
				modifier = {
					factor = 1.5
					trait = conscientious
				}
				modifier = {
					factor = 1.5
					trait = curious
				}
				modifier = {
					factor = 0.75
					educator = {
						trait = slothful
					}
				}
				modifier = {
					factor = 0.75
					educator = {
						trait = wroth
					}
				}
				modifier = {
					factor = 0.75
					educator = {
						trait = envious
					}
				}
				modifier = {
					factor = 0.75
					trait = haughty
				}
				modifier = {
					factor = 0.75
					trait = indolent
				}
				modifier = {
					factor = 0
					age = 12
				}
				modifier = {
					factor = 0
					NOT = { has_focus = focus_ch_pride }
					NOT = { has_focus = focus_ch_humility }
					NOT = { has_focus = focus_ch_duty }
					NOT = { has_focus = focus_ch_etiquette }
					NOT = { has_focus = focus_ch_thrift }
					NOT = { has_focus = focus_ch_faith }
					NOT = { has_focus = focus_ch_struggle }
					NOT = { has_focus = focus_ch_heritage }
				}
				educator = {
					character_event = {
						id = OPG.4036
					}
				}
			}

			#------------------------------------------------------------------#
			# 일반적 관계도 향상 (연령무관)                                    #
			#------------------------------------------------------------------#

			25 = {
				modifier = {
					factor = 1.2
					educator = {
						trait = gregarious
					}
				}
				modifier = {
					factor = 1.2
					educator = {
						trait = kind
					}
				}
				modifier = {
					factor = 1.2
					educator = {
						trait = socializer
					}
				}
				modifier = {
					factor = 1.2
					educator = {
						trait = gamer
					}
				}
				educator = {
					character_event = {
						id = OPG.4041
					}
				}
			}

			#------------------------------------------------------------------#
			# 양자 입양 (~14세)                                                #
			#------------------------------------------------------------------#

			45 = {
				modifier = {
					factor = 0
					age = 15
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child
						has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
						has_any_opinion_modifier = opinion_mod_char_punished_harassed_or_abused_orphan
					}
				}
				modifier = {
					factor = 2
					educator = {
						is_married = yes
						NOT = { num_of_children = 1 }
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						is_married = yes
						NOT = { num_of_children = 2 }
					}
				}
				modifier = {
					factor = 2
					educator = {
						is_married = yes
						NOT = {
							any_child = {
								count = 1
								is_female = no
							}
						}
						ROOT = { is_female = no }
					}
				}
				modifier = {
					factor = 1.8
					educator = {
						is_married = yes
						NOT = {
							any_child = {
								count = 1
								is_female = yes
							}
						}
						ROOT = { is_female = yes }
					}
				}
				modifier = {
					factor = 0.8
					educator = {
						is_married = yes
						num_of_children = 5
					}
				}
				modifier = {
					factor = 0.8
					educator = {
						is_married = yes
						num_of_children = 6
					}
				}
				modifier = {
					factor = 0.8
					educator = {
						is_married = yes
						num_of_children = 7
					}
				}
				modifier = {
					factor = 0.8
					educator = {
						is_married = yes
						num_of_children = 8
					}
				}
				modifier = {
					factor = 2.0
					educator = {
						is_married = yes
						ROOT = {
							has_opinion_modifier = {
								who = PREV
								modifier = opinion_mod_char_good_guardian
							}
						}
					}
				}
				educator = {
					character_event = {
						id = OPG.4046
					}
				}
			}

			#------------------------------------------------------------------#
			# 교육 목표 교육 (12~15세)                                         #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.5
					educator = {
						trait = diligent
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = kind
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = patient
					}
				}
				modifier = {
					factor = 1.5
					trait = conscientious
				}
				modifier = {
					factor = 1.5
					trait = curious
				}
				modifier = {
					factor = 0.75
					educator = {
						trait = slothful
					}
				}
				modifier = {
					factor = 0.75
					educator = {
						trait = wroth
					}
				}
				modifier = {
					factor = 0.75
					educator = {
						trait = envious
					}
				}
				modifier = {
					factor = 0.75
					trait = haughty
				}
				modifier = {
					factor = 0.75
					trait = indolent
				}
				modifier = {
					factor = 0
					NOT = { has_focus = focus_ed_diplomacy }
					NOT = { has_focus = focus_ed_martial }
					NOT = { has_focus = focus_ed_stewardship }
					NOT = { has_focus = focus_ed_intrigue }
					NOT = { has_focus = focus_ed_learning }
				}
				modifier = {
					factor = 0
					NOT = { age = 12 }
				}
				educator = {
					character_event = {
						id = OPG.4056
					}
				}
			}

			#------------------------------------------------------------------#
			# 학대 : 육체적 학대 (~11세)                                       #
			#------------------------------------------------------------------#

			35 = {
				modifier = {
					factor = 0
					educator = {
						ROOT = {
							has_opinion_modifier = {
								who = PREV
								modifier = opinion_mod_char_good_guardian
							}
						}
					}
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = mod_nemo_event_flag_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child
						has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
						has_any_opinion_modifier = opinion_mod_char_punished_harassed_or_abused_orphan
					}
				}
				modifier = {
					factor = 0
					age = 12
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = cruel
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = impaler
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = wroth
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = paranoid
					}
				}
				modifier = {
					factor = 0.5
					educator = {
						trait = kind
					}
				}
				modifier = {
					factor = 0.5
					educator = {
						trait = patient
					}
				}
				educator = {
					character_event = {
						id = OPG.4061
					}
				}
			}

			#------------------------------------------------------------------#
			# 학대 : 성적 학대 (~11세)                                         #
			#------------------------------------------------------------------#

			35 = {
				modifier = {
					factor = 0
					educator = {
						ROOT = {
							has_opinion_modifier = {
								who = PREV
								modifier = opinion_mod_char_good_guardian
							}
						}
					}
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = mod_nemo_event_flag_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child
						has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
						has_any_opinion_modifier = opinion_mod_char_punished_harassed_or_abused_orphan
					}
				}
				modifier = {
					factor = 0
					age = 12
				}
				modifier = {
					factor = 0
					educator = {
						NOT = { trait = homosexual }
						same_sex = ROOT
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = lustful
						NOT = { same_sex = ROOT }
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = homosexual
						same_sex = ROOT
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						OR = {
							trait = seducer
							trait = seductress
						}
						NOT = { same_sex = ROOT }
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = hedonist
						NOT = { same_sex = ROOT }
					}
				}
				modifier = {
					factor = 0
					educator = {
						trait = chaste
					}
				}
				modifier = {
					factor = 0.5
					educator = {
						trait = kind
					}
				}
				modifier = {
					factor = 0.5
					educator = {
						trait = celibate
					}
				}
				educator = {
					character_event = {
						id = OPG.4066
					}
				}
			}

			#------------------------------------------------------------------#
			# 학대의 결과 (12~15세)                                            #
			#------------------------------------------------------------------#

			100 = {
				modifier = {
					factor = 0
					NOT = { age = 12 }
				}
				modifier = {
					factor = 0
					NOT = { has_character_flag = mod_nemo_event_flag_punished_orphan_child }
					NOT = { has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child }
					NOT = { has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child }
					NOT = { has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child }
					NOT = { has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child }
				}
				educator = {
					character_event = {
						id = OPG.4071
					}
				}
			}
		}
	}
}

#------------------------------------------------------------------------------#
# 보호자-고아, 일반적 경험 이벤트                                              #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4031
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 성공                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.5
					educator = {
						trait = diligent
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = kind
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = patient
					}
				}
				FROM = {
					character_event = {
						id = OPG.4032
					}
				}
			}

			#------------------------------------------------------------------#
			# 실패                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.5
					educator = {
						trait = slothful
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = wroth
					}
				}
				modifier = {
					factor = 1.5
					educator = {
						trait = envious
					}
				}
				FROM = {
					character_event = {
						id = OPG.4033
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4032
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 좋은 경험을 얻다 (Random Stat +)                                     #
		#----------------------------------------------------------------------#

		random_list = {
			20 = {
				change_diplomacy = 1
			}
			20 = {
				change_martial = 1
			}
			20 = {
				change_stewardship = 1
			}
			20 = {
				change_intrigue = 1
			}
			20 = {
				change_learning = 1
			}
		}

		random_list = {
			20 = {
				change_diplomacy = 1
			}
			20 = {
				change_martial = 1
			}
			20 = {
				change_stewardship = 1
			}
			20 = {
				change_intrigue = 1
			}
			20 = {
				change_learning = 1
			}
		}

		#----------------------------------------------------------------------#
		# 45% 확률로 Curious 트레잇을 얻는다.                                  #
		#----------------------------------------------------------------------#

		random = {
			chance = 45

			if = {
				limit = {
					NOT = { trait = curious }
				}
				add_trait = curious
			}
		}
	}
}

character_event = {

	id = OPG.4033
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 좋지 않은 경험을 얻다 (Random Stat -)                                #
		#----------------------------------------------------------------------#

		random_list = {
			16 = {
				change_diplomacy = -1
			}
			16 = {
				change_martial = -1
			}
			16 = {
				change_stewardship = -1
			}
			16 = {
				change_intrigue = -1
			}
			16 = {
				change_learning = -1
			}
			20 = {

			}
		}

		random_list = {
			18 = {
				change_diplomacy = -1
			}
			18 = {
				change_martial = -1
			}
			18 = {
				change_stewardship = -1
			}
			18 = {
				change_intrigue = -1
			}
			18 = {
				change_learning = -1
			}
			10 = {

			}
		}

		#----------------------------------------------------------------------#
		# 45% 확률로 Timid 트레잇을 얻는다.                                    #
		#----------------------------------------------------------------------#

		random = {
			chance = 45

			if = {
				limit = {
					NOT = { trait = timid }
				}
				add_trait = timid
			}
		}
	}
}



#------------------------------------------------------------------------------#
# 보호자-고아, 관심사에 따른 교육 이벤트                                       #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4036
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 성공                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.2
					FROM = { trait = conscientious }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = curious }
				}
				modifier = {
					factor = 1.5
					FROM = { trait = genius }
				}
				modifier = {
					factor = 1.3
					FROM = { trait = quick }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = shrewd }
				}
				FROM = {
					character_event = {
						id = OPG.4037
					}
				}
			}

			#------------------------------------------------------------------#
			# 실패                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.2
					FROM = { trait = haughty }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = indolent }
				}
				modifier = {
					factor = 1.5
					FROM = { trait = imbecile }
				}
				modifier = {
					factor = 1.3
					FROM = { trait = slow }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = dull }
				}
				FROM = {
					character_event = {
						id = OPG.4038
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4037
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 긍지(Pride) : 성공                                                   #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_pride
			}

			prestige = 2

			random_list = {
				25 = {
					add_trait = haughty
				}
				25 = {
					add_trait = brooding
				}
				20 = {
					change_martial = 1
				}
				20 = {
					change_intrigue = 1
				}
				10 = {
					change_martial = 1
					change_intrigue = 1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 겸손(Humility) : 성공                                                #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_humility
			}

			prestige = 2

			random_list = {
				25 = {
					add_trait = timid
				}
				25 = {
					add_trait = affectionate
				}
				20 = {
					change_learning = 1
				}
				20 = {
					change_diplomacy = 1
				}
				10 = {
					change_learning = 1
					change_diplomacy = 1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 의무(Duty) : 성공                                                    #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_duty
			}

			prestige = 2

			random_list = {
				50 = {
					add_trait = conscientious
				}
				25 = {
					change_stewardship = 1
				}
				25 = {
					change_stewardship = 2
				}
			}
		}

		#----------------------------------------------------------------------#
		# 예의(Etiquette) : 성공                                               #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_etiquette
			}

			prestige = 2

			random_list = {
				25 = {
					add_trait = playful
				}
				25 = {
					add_trait = indolent
				}
				20 = {
					change_intrigue = 1
				}
				20 = {
					change_diplomacy = 1
				}
				10 = {
					change_intrigue = 1
					change_diplomacy = 1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 검약(Thrift) : 성공                                                  #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_thrift
			}

			prestige = 2

			random_list = {
				25 = {
					add_trait = curious
				}
				25 = {
					add_trait = fussy
				}
				35 = {
					change_stewardship = 1
				}
				15 = {
					change_stewardship = 2
				}
			}
		}

		#----------------------------------------------------------------------#
		# 신념(Thrift) : 성공                                                  #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_faith
			}

			prestige = 2

			random_list = {
				45 = {
					add_trait = idolizer
				}
				40 = {
					change_learning = 1
				}
				15 = {
					change_learning = 2
				}
			}
		}

		#----------------------------------------------------------------------#
		# 고투(Struggle) : 성공                                                #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_struggle
			}

			prestige = 2

			random_list = {
				25 = {
					add_trait = rowdy
				}
				25 = {
					add_trait = willful
				}
				20 = {
					change_intrigue = 1
				}
				20 = {
					change_martial = 1
				}
				10 = {
					change_intrigue = 1
					change_martial = 1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 유산(Heritage) : 성공                                                #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_heritage
			}

			prestige = 2

			random_list = {
				20 = {
					if = {
						limit = {
							NOT = { culture = FROM }
						}
						culture = FROM
					}
				}
				20 = {
					if = {
						limit = {
							NOT = { religion = FROM }
						}
						religion = FROM
					}
				}
				40 = {
					change_learning = 1
				}
				20 = {
					change_learning = 2
				}
			}
		}
	}
}

character_event = {

	id = OPG.4038
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 긍지(Pride) : 실패                                                   #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_pride
			}

			random_list = {
				25 = {
					remove_trait = haughty
				}
				25 = {
					remove_trait = brooding
				}
				35 = {
					
				}
				15 = {
					change_martial = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 겸손(Humility) : 실패                                                #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_humility
			}

			random_list = {
				25 = {
					remove_trait = timid
				}
				25 = {
					remove_trait = affectionate
				}
				35 = {

				}
				15 = {
					change_diplomacy = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 의무(Duty) : 실패                                                    #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_duty
			}

			random_list = {
				35 = {
					remove_trait = conscientious
				}
				45 = {

				}
				20 = {
					change_stewardship = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 예의(Etiquette) : 실패                                               #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_etiquette
			}

			prestige = 2

			random_list = {
				25 = {
					remove_trait = playful
				}
				25 = {
					remove_trait = indolent
				}
				35 = {

				}
				15 = {
					change_diplomacy = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 검약(Thrift) : 실패                                                  #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_thrift
			}

			prestige = 2

			random_list = {
				25 = {
					remove_trait = curious
				}
				25 = {
					remove_trait = fussy
				}
				35 = {

				}
				15 = {
					change_stewardship = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 신념(Thrift) : 실패                                                  #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_faith
			}

			random_list = {
				35 = {
					remove_trait = idolizer
				}
				50 = {

				}
				15 = {
					change_learning = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 고투(Struggle) : 실패                                                #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_struggle
			}

			random_list = {
				25 = {
					remove_trait = rowdy
				}
				25 = {
					remove_trait = willful
				}
				35 = {

				}
				15 = {
					change_martial = -1
				}
			}
		}

		#----------------------------------------------------------------------#
		# 유산(Heritage) : 실패                                                #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ch_heritage
			}

			random_list = {
				85 = {

				}
				15 = {
					change_learning = -1
				}
			}
		}
	}
}

#------------------------------------------------------------------------------#
# 보호자-고아, 우호도 향상 이벤트                                              #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4041
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 성공                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.2
					trait = gregarious
				}
				modifier = {
					factor = 1.2
					trait = kind
				}
				modifier = {
					factor = 1.5
					trait = socializer
				}
				modifier = {
					factor = 1.3
					trait = gamer
				}
				FROM = {
					character_event = {
						id = OPG.4042
					}
				}
			}

			#------------------------------------------------------------------#
			# 실패                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.2
					trait = shy
				}
				modifier = {
					factor = 1.2
					trait = wroth
				}
				modifier = {
					factor = 1.5
					trait = schemer
				}
				modifier = {
					factor = 1.3
					trait = impaler
				}
				FROM = {
					character_event = {
						id = OPG.4043
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4042
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 10년 동안 30의 우호도 보너스가 있다.                                 #
		#----------------------------------------------------------------------#

		opinion = {
			who = FROM
			modifier = opinion_mod_char_good_guardian
		}
	}
}

character_event = {

	id = OPG.4043
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {
		if = {
			limit = {
				trait = timid
			}
			add_trait = timid
		}
	}
}

#------------------------------------------------------------------------------#
# 보호자-고아, 양자로의 입양을 원함                                            #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4046
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {
		liege = {
			character_event = {
				id = OPG.4047
			}
		}
	}
}

character_event = {
	id = OPG.4047
	desc = EVTDESC_OPG_4047
	picture = GFX_evt_nemo_common_letter

	is_triggered_only = yes

	# ROOT : Player, FROM : Guardian, FROMFROM : Orphan/Ward

	option = {
		name = EVTOPTA_OPG_4047

		FROMFROM = {
			save_event_target_as = mod_event_target_ward
		}
		FROM = {
			save_event_target_as = mod_event_target_educator
		}

		#----------------------------------------------------------------------#
		# 그들은 입양을 허락한 당신에게 매우 감사할 것입니다.                  #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_agree_to_adopt_orphan
			}
		}
		event_target:mod_event_target_ward = {

			clear_flag_modifier_orphan_under_guardianship_effect = yes
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes

			remove_orphan_character_flag_effect = yes
			remove_orphan_character_flag_reminiscence_effect = yes
			remove_orphan_character_relative_opinion_modifier_effect = yes
			remove_orphan_character_trait_effect = yes

			opinion = {
				who = ROOT
				modifier = opinion_mod_cm_eternal_benefactor
			}
		}

		#----------------------------------------------------------------------#
		# 만약 그들의 사이가 음모의 대상 관계였을 경우...                      #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_ward = {
			remove_orphan_character_flag_intrigue_effect = yes
			remove_orphan_character_relative_opinion_intrigue_modifier_effect = yes
		}

		#----------------------------------------------------------------------#
		# 입양된 고아와 가신/봉신 사이에 부자/모자 관계를 만들어준다.          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				event_target:mod_event_target_educator = {
					is_female = no
				}
			}
			event_target:mod_event_target_ward = {
				set_father = event_target:mod_event_target_educator
			}
			event_target:mod_event_target_educator = {
				spouse = {
					event_target:mod_event_target_ward = {
						set_mother = PREV
					}
				}
			}
		}
		
		if = {
			limit = {
				event_target:mod_event_target_educator = {
					is_female = yes
				}
			}
			event_target:mod_event_target_ward = {
				set_mother = event_target:mod_event_target_educator
			}
			event_target:mod_event_target_educator = {
				spouse = {
					event_target:mod_event_target_ward = {
						set_father = PREV
					}
				}
			}
		}

		event_target:mod_event_target_ward = {
			dynasty = event_target:mod_event_target_educator
			move_character = event_target:mod_event_target_educator
		}

		#----------------------------------------------------------------------#
		# 얼마 후 고아가 편지를 보내온다.                                      #
		#----------------------------------------------------------------------#
		
		hidden_tooltip = {
			event_target:mod_event_target_ward = {
				character_event = {
					id = OPG.4048
					days = 14
				}
			}		
		}
	}

	option = {
		name = EVTOPTB_OPG_4047
		FROMFROM = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}
	}

	option = {
		name = EVTOPTC_OPG_4047
		trigger = {
			FROMFROM = {
				has_character_flag = mod_event_character_flag_secret_agent
			}
		}
	}
}

character_event = {

	id = OPG.4048
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = {
			character_event = {
				id = OPG.4049
			}
		}
	}
}

character_event = {

	id = OPG.4049
	desc = EVTDESC_OPG_4049
	picture = GFX_evt_recieve_letter

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_OPG_4049
		hidden_tooltip = {
			letter_event = {
				id = OPG.4050
			}
		}
	}
}

letter_event = {

	id = OPG.4050
	desc = EVTDESC_OPG_4050

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTA_OPG_4050
		hidden_tooltip = {
			ROOT = {
				letter_event = {
					id = OPG.4051
				}			
			}
		}
	}
}

letter_event = {

	id = OPG.4051
	desc = EVTDESC_OPG_4051

	is_triggered_only = yes
	show_from_from_from = yes

	# mod_event_target_orphanage_nurse
	# mod_event_target_player (ROOT)
	# mod_event_target_orphan
	# mod_event_target_ruler (FROM)

	option = {
		name = EVTOPTA_OPG_4051
		hidden_tooltip = {
			prestige = 5
			piety = 5
		}
	}
}

#------------------------------------------------------------------------------#
# 보호자-고아, 교육 목표에 따른 교육 이벤트                                    #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4056
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 성공                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.5
					FROM = { trait = genius }
				}
				modifier = {
					factor = 1.3
					FROM = { trait = quick }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = shrewd }
				}

				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_diplomacy
						trait = affectionate
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_diplomacy
						trait = curious
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_martial
						trait = rowdy
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_martial
						trait = willful
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_stewardship
						trait = brooding
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_stewardship
						trait = conscientious
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_intrigue
						trait = playful
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_intrigue
						trait = fussy
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_learning
						trait = timid
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_learning
						trait = idolizer
					}
				}

				FROM = {
					character_event = {
						id = OPG.4057
					}
				}
			}

			#------------------------------------------------------------------#
			# 실패                                                             #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 1.5
					FROM = { trait = imbecile }
				}
				modifier = {
					factor = 1.3
					FROM = { trait = slow }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = dull }
				}

				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_diplomacy
						trait = willful
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_diplomacy
						trait = fussy
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_martial
						trait = timid
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_martial
						trait = idolizer
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_stewardship
						trait = indolent
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_stewardship
						trait = haughty
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_intrigue
						trait = rowdy
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_intrigue
						trait = affectionate
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_learning
						trait = brooding
					}
				}
				modifier = {
					factor = 1.3
					FROM = {
						has_focus = focus_ed_learning
						trait = playful
					}
				}

				FROM = {
					character_event = {
						id = OPG.4058
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4057
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 외교 : 성공                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_diplomacy
			}
			change_diplomacy = 2

			random = {
				chance = 35
				remove_trait = shy
				add_trait = gregarious
			}

			if = {
				limit = {
					trait = willful
				}
				random = {
					chance = 70
					remove_trait = willful
				}
			}

			if = {
				limit = {
					trait = fussy
				}
				random = {
					chance = 70
					remove_trait = fussy
				}
			}			
		}

		#----------------------------------------------------------------------#
		# 군사 : 성공                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_martial
			}
			change_martial = 2

			random = {
				chance = 35
				remove_trait = craven
				add_trait = brave
			}

			random = {
				chance = 20
				remove_trait = weak
				remove_trait = feeble
				add_trait = robust
			}

			if = {
				limit = {
					trait = timid
				}
				random = {
					chance = 70
					remove_trait = timid
				}
			}

			if = {
				limit = {
					trait = idolizer
				}
				random = {
					chance = 70
					remove_trait = idolizer
				}
			}			
		}

		#----------------------------------------------------------------------#
		# 재정 : 성공                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_stewardship
			}
			change_stewardship = 2

			random = {
				chance = 35
				remove_trait = arbitrary
				add_trait = just
			}

			if = {
				limit = {
					NOT = { trait = genius }
				}
				random = {
					chance = 20
					remove_trait = imbecile
					remove_trait = slow
					remove_trait = dull
					add_trait = shrewd
				}
			}

			if = {
				limit = {
					trait = indolent
				}
				random = {
					chance = 70
					remove_trait = indolent
				}
			}

			if = {
				limit = {
					trait = haughty
				}
				random = {
					chance = 70
					remove_trait = haughty
				}
			}			
		}

		#----------------------------------------------------------------------#
		# 음모 : 성공                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_intrigue
			}
			change_intrigue = 2

			random = {
				chance = 35
				remove_trait = honest
				add_trait = deceitful
			}

			if = {
				limit = {
					trait = rowdy
				}
				random = {
					chance = 70
					remove_trait = rowdy
				}
			}

			if = {
				limit = {
					trait = affectionate
				}
				random = {
					chance = 70
					remove_trait = affectionate
				}
			}			
		}

		#----------------------------------------------------------------------#
		# 학력 : 성공                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_learning
			}
			change_learning = 2

			random = {
				chance = 35
				remove_trait = cynical
				add_trait = zealous
			}

			random = {
				chance = 20
				add_trait = erudite
			}

			if = {
				limit = {
					trait = brooding
				}
				random = {
					chance = 70
					remove_trait = brooding
				}
			}

			if = {
				limit = {
					trait = playful
				}
				random = {
					chance = 70
					remove_trait = playful
				}
			}			
		}
	}
}


character_event = {

	id = OPG.4058
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 외교 : 실패                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_diplomacy
			}
			random = {
				chance = 15
				change_diplomacy = -1
			}
		}

		#----------------------------------------------------------------------#
		# 군사 : 실패                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_martial
			}
			random = {
				chance = 15
				change_martial = -1
			}
		}

		#----------------------------------------------------------------------#
		# 재정 : 실패                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_stewardship
			}
			random = {
				chance = 15
				change_stewardship = -1
			}
		}

		#----------------------------------------------------------------------#
		# 음모 : 실패                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_intrigue
			}
			random = {
				chance = 15
				change_intrigue = -1
			}
		}

		#----------------------------------------------------------------------#
		# 학력 : 실패                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				has_focus = focus_ed_learning
			}
			random = {
				chance = 15
				change_learning = -1
			}
		}
	}
}

#------------------------------------------------------------------------------#
# 보호자-고아, 폭력적 양육 이벤트                                              #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4061
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 행동으로 옮긴다 : 일반적인 체벌                                  #
			#------------------------------------------------------------------#

			50 = {
				FROM = {
					character_event = {
						id = OPG.4062
					}
				}
			}

			#------------------------------------------------------------------#
			# 행동으로 옮기지 않는다.                                          #
			#------------------------------------------------------------------#

			30 = {

			}

			#------------------------------------------------------------------#
			# 행동으로 옮긴다 : 심한 체벌                                      #
			#------------------------------------------------------------------#

			20 = {
				FROM = {
					character_event = {
						id = OPG.4063
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4062
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 트레잇 삭제                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				trait = lustful
			}
			random = {
				chance = 75
				remove_trait = lustful
			}
		}

		if = {
			limit = {
				trait = gluttonous
			}
			random = {
				chance = 75
				remove_trait = gluttonous
			}
		}

		if = {
			limit = {
				trait = greedy
			}
			random = {
				chance = 75
				remove_trait = greedy
			}
		}

		if = {
			limit = {
				trait = slothful
			}
			random = {
				chance = 75
				remove_trait = slothful
			}
		}

		if = {
			limit = {
				trait = wroth
			}
			random = {
				chance = 75
				remove_trait = wroth
			}
		}

		if = {
			limit = {
				trait = envious
			}
			random = {
				chance = 75
				remove_trait = envious
			}
		}

		if = {
			limit = {
				trait = proud
			}
			random = {
				chance = 75
				remove_trait = proud
			}
		}

		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 75
				remove_trait = arbitrary
			}
		}

		if = {
			limit = {
				trait = ambitious
			}
			random = {
				chance = 75
				remove_trait = ambitious
			}
		}

		#----------------------------------------------------------------------#

		if = {
			limit = {
				trait = haughty
			}
			random = {
				chance = 75
				remove_trait = haughty
			}
		}

		if = {
			limit = {
				trait = indolent
			}
			random = {
				chance = 75
				remove_trait = indolent
			}
		}

		#----------------------------------------------------------------------#
		# 체벌의 기록을 남겨둔다                                               #
		#----------------------------------------------------------------------#

		set_character_flag = mod_nemo_event_flag_punished_orphan_child

		opinion = {
			who = FROM
			modifier = opinion_mod_char_punished_harassed_or_abused_orphan
		}
	}
}

character_event = {

	id = OPG.4063
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 트레잇 삭제                                                          #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				trait = lustful
			}
			random = {
				chance = 40
				remove_trait = lustful
			}
		}

		if = {
			limit = {
				trait = gluttonous
			}
			random = {
				chance = 40
				remove_trait = gluttonous
			}
		}

		if = {
			limit = {
				trait = greedy
			}
			random = {
				chance = 40
				remove_trait = greedy
			}
		}

		if = {
			limit = {
				trait = slothful
			}
			random = {
				chance = 40
				remove_trait = slothful
			}
		}

		if = {
			limit = {
				trait = wroth
			}
			random = {
				chance = 40
				remove_trait = wroth
			}
		}

		if = {
			limit = {
				trait = envious
			}
			random = {
				chance = 40
				remove_trait = envious
			}
		}

		if = {
			limit = {
				trait = proud
			}
			random = {
				chance = 40
				remove_trait = proud
			}
		}

		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 40
				remove_trait = arbitrary
			}
		}

		if = {
			limit = {
				trait = ambitious
			}
			random = {
				chance = 40
				remove_trait = ambitious
			}
		}

		#----------------------------------------------------------------------#

		if = {
			limit = {
				trait = haughty
			}
			random = {
				chance = 40
				remove_trait = haughty
			}
		}

		if = {
			limit = {
				trait = indolent
			}
			random = {
				chance = 40
				remove_trait = indolent
			}
		}

		#----------------------------------------------------------------------#
		# 일정 확률로 부상이 남는다                                            #
		#----------------------------------------------------------------------#

		random = {
			chance = 65
			add_trait = wounded
		}

		#----------------------------------------------------------------------#
		# 체벌의 기록을 남겨둔다                                               #
		#----------------------------------------------------------------------#

		set_character_flag = mod_nemo_event_flag_severely_punished_orphan_child

		opinion = {
			who = FROM
			modifier = opinion_mod_char_punished_harassed_or_abused_orphan
		}
	}
}


#------------------------------------------------------------------------------#
# 보호자-고아, 성적 학대 양육 이벤트                                           #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4066
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 행동으로 옮기지 않는다.                                          #
			#------------------------------------------------------------------#

			60 = {

			}

			#------------------------------------------------------------------#
			# 행동으로 옮긴다 : 가벼운 성적 학대                               #
			#------------------------------------------------------------------#

			20 = {
				modifier = {
					factor = 0
					FROM = {
						is_female = yes
					}
				}
				FROM = {
					character_event = {
						id = OPG.4067
					}
				}
			}

			#------------------------------------------------------------------#
			# 행동으로 옮긴다 : 성적 학대                                      #
			#------------------------------------------------------------------#

			20 = {
				FROM = {
					character_event = {
						id = OPG.4068
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4067
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 문제의 기록을 남겨둔다                                               #
		#----------------------------------------------------------------------#

		set_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child

		opinion = {
			who = FROM
			modifier = opinion_mod_char_punished_harassed_or_abused_orphan
		}
	}
}

character_event = {

	id = OPG.4068
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan/Ward, FROM : Guardian

	immediate = {

		#----------------------------------------------------------------------#
		# 문제의 기록을 남겨둔다                                               #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				same_sex = FROM
			}
			set_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
		}

		if = {
			limit = {
				NOT = { same_sex = FROM }
			}
			set_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
		}

		opinion = {
			who = FROM
			modifier = opinion_mod_char_punished_harassed_or_abused_orphan
		}
	}
}


#------------------------------------------------------------------------------#
# 보호자-고아, 학대의 결과 이벤트                                              #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4071
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Guardian, FROM : Orphan/Ward

	immediate = {

		random_list = {
			
			#------------------------------------------------------------------#
			# 학대에도 불구하고 악영향 없이 자랐다                             #
			#------------------------------------------------------------------#

			25 = {
				FROM = {
					clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
				}
			}

			#------------------------------------------------------------------#
			# 영향이 있다                                                      #
			#------------------------------------------------------------------#

			75 = {
				if = {
					limit = {
						FROM = {
							has_character_flag = mod_nemo_event_flag_punished_orphan_child
						}
					}
					random = {
						chance = 5
						FROM = {
							remove_trait = patient
							add_trait = wroth
						}
					}
					FROM = {
						clr_character_flag = mod_nemo_event_flag_punished_orphan_child

						remove_opinion = {
							who = ROOT
							modifier = opinion_mod_char_punished_harassed_or_abused_orphan
						}
					}
				}

				if = {
					limit = {
						FROM = {
							has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
						}
					}
					random = {
						chance = 10
						modifier = {
							factor = 0
							FROM = { trait = imbecile }
						}
						FROM = {
							remove_trait = quick
							remove_trait = genius
							remove_trait = shrewd
							add_trait = dull
						}
					}
					random = {
						chance = 25
						FROM = {
							remove_trait = patient
							add_trait = wroth
						}
					}
					FROM = {
						clr_character_flag = mod_nemo_event_flag_severely_punished_orphan_child

						remove_opinion = {
							who = ROOT
							modifier = opinion_mod_char_punished_harassed_or_abused_orphan
						}
					}
				}
				
				if = {
					limit = {
						FROM = {
							has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child
						}
					}
					random = {
						chance = 35
						FROM = {
							remove_trait = ugly
							add_trait = fair
						}
					}
					random = {
						chance = 10
						FROM = {
							remove_trait = chaste
							add_trait = lustful
						}
					}
					FROM = {
						clr_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child

						remove_opinion = {
							who = ROOT
							modifier = opinion_mod_char_punished_harassed_or_abused_orphan
						}
					}
				}

				if = {
					limit = {
						FROM = {
							has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						}
					}
					random = {
						chance = 15
						FROM = {
							remove_trait = ugly
							add_trait = fair
						}
					}
					random = {
						chance = 30
						FROM = {
							remove_trait = chaste
							add_trait = lustful
						}
					}
					random = {
						chance = 35
						FROM = {
							add_trait = wounded
						}
					}
					random = {
						chance = 25
						FROM = {
							add_trait = depressed
						}
					}

					if = {
						limit = {
							has_concubinage = yes
							is_female = no
						}

						FROM = {
							clr_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child

							random_list = {
								65 = {
									remove_opinion = {
										who = ROOT
										modifier = opinion_mod_char_punished_harassed_or_abused_orphan
									}
								}
								35 = {
									set_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child_after
								}
							}
						}
					}

					if = {
						limit = {
							OR = {
								NOT = { has_concubinage = yes }
								is_female = yes
							}
						}

						FROM = {
							clr_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child

							remove_opinion = {
								who = ROOT
								modifier = opinion_mod_char_punished_harassed_or_abused_orphan
							}
						}
					}
				}

				if = {
					limit = {
						FROM = {
							has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
						}
					}
					random = {
						chance = 15
						FROM = {
							remove_trait = ugly
							add_trait = fair
						}
					}
					random = {
						chance = 30
						FROM = {
							remove_trait = chaste
							add_trait = lustful
						}
					}
					random = {
						chance = 45
						FROM = {
							add_trait = homosexual
						}
					}
					random = {
						chance = 35
						FROM = {
							add_trait = wounded
						}
					}
					random = {
						chance = 35
						FROM = {
							add_trait = depressed
						}
					}

					FROM = {
						clr_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child

						remove_opinion = {
							who = ROOT
							modifier = opinion_mod_char_punished_harassed_or_abused_orphan
						}
					}
				}
			}
		}
	}
}




#------------------------------------------------------------------------------#
# 고아가 유년기 관심사를 고른다 (5세 이상) (4081~4083) / 트리거 이벤트         #
# Conclave DLC 가 있는 경우에만 (자동으로) 설정된다.                           #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4081
	hide_window = yes
	
	ai = no
			
	trigger = {

		#----------------------------------------------------------------------#
		# 비밀회의 DLC 대응 기능이므로 DLC 체크를 한다.                        #
		#----------------------------------------------------------------------#
		
		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# 일반 상태의 플레이어 확인 (성인)                                     #
		#----------------------------------------------------------------------#

		is_common_player_trigger = yes

		#----------------------------------------------------------------------#
		# 건물 : 최소한 고아원 레벨 1 이상의 고아원 건물이 필요                #
		#----------------------------------------------------------------------#

		OR = {
			has_orphanage_level_1_trigger = yes
			has_orphanage_level_2_trigger = yes
			has_orphanage_level_3_trigger = yes
			has_orphanage_level_4_trigger = yes
		}

		#----------------------------------------------------------------------#
		# 6~12세 사이의 미성년 고아에게,                                       #
		# - 아직 유년기 포커스가 설정되지 않았을 것                            #
		# - 다른 캐릭터가 보호자로 설정되지 않았을 것                          #
		#----------------------------------------------------------------------#

		any_realm_character = {
			OR = {
				trait = rescued_orphan_by_ai
				trait = rescued_orphan_by_player
			}
			age = 6
			NOT = { age = 12 }

			NOT = { has_focus = focus_ch_pride }
			NOT = { has_focus = focus_ch_humility }
			NOT = { has_focus = focus_ch_duty }
			NOT = { has_focus = focus_ch_etiquette }
			NOT = { has_focus = focus_ch_thrift }
			NOT = { has_focus = focus_ch_faith }
			NOT = { has_focus = focus_ch_struggle }
			NOT = { has_focus = focus_ch_heritage }

			liege = {
				ai = no
			}
			is_orphan_in_orphanage_trigger = no
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		any_realm_character = {
			limit = {
				OR = {
					trait = rescued_orphan_by_ai
					trait = rescued_orphan_by_player
				}
				age = 5
				NOT = { age = 12 }

				NOT = { has_focus = focus_ch_pride }
				NOT = { has_focus = focus_ch_humility }
				NOT = { has_focus = focus_ch_duty }
				NOT = { has_focus = focus_ch_etiquette }
				NOT = { has_focus = focus_ch_thrift }
				NOT = { has_focus = focus_ch_faith }
				NOT = { has_focus = focus_ch_struggle }
				NOT = { has_focus = focus_ch_heritage }

				liege = {
					ai = no
				}
				is_orphan_in_orphanage_trigger = no
			}
			character_event = {
				id = OPG.4082
			}
		}
	}
}

character_event = {

	id = OPG.4082

	hide_window = yes
	is_triggered_only = yes

	immediate = {

		#----------------------------------------------------------------------#
		# 플레이어를 괴롭히지 않도록, 선택지의 선택은 고아원 보모가 한다.      #
		# 고아원 보모가 없는 경우에는 이벤트 자체가 실행되지 않으므로 무시.    #
		# 비밀회의 DLC 를 전제로 하므로 educator 로 호출한다.                  #
		#----------------------------------------------------------------------#

		educator = {
			save_event_target_as = mod_event_target_educator
		}

		#----------------------------------------------------------------------#
		# 주 이벤트 타겟을 설정한다.                                           #
		#----------------------------------------------------------------------#

		ROOT = {
			save_event_target_as = mod_event_target_orphan
		}
		FROM = {
			save_event_target_as = mod_event_target_player
		}

		#----------------------------------------------------------------------#
		# 고아원 보모에게 이벤트 실행                                          #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			character_event = {
				id = OPG.4083
			}
		}
	}
}

character_event = {

	id = OPG.4083
	desc = EVTDESC_HIDDEN_EVENT
	picture = GFX_evt_nemo_blank

	# 플레이어 : mod_event_target_player
	# 고아     : mod_event_target_orphan
	# 결정자   : mod_event_target_educator (ROOT)

	is_triggered_only = yes

	option = {
		name = EVTOPTA_HIDDEN_EVENT
		ai_chance = {
			factor = 25
		}
		
		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					is_childhood_focus_set_trigger = no
				}
			}
			random_list = {
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_faith
					}
				}
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_heritage
					}
				}
			}
		}

		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
		clear_event_target = mod_event_target_orphan
	}

	option = {
		name = EVTOPTB_HIDDEN_EVENT
		ai_chance = {
			factor = 25
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					is_childhood_focus_set_trigger = no
				}
			}
		
			random_list = {
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_duty
					}
				}
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_thrift
					}
				}
			}
		}

		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
		clear_event_target = mod_event_target_orphan
	}

	option = {
		name = EVTOPTC_HIDDEN_EVENT
		ai_chance = {
			factor = 25
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					is_childhood_focus_set_trigger = no
				}
			}		

			random_list = {
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_pride
					}
				}
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_struggle
					}
				}
			}
		}

		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
		clear_event_target = mod_event_target_orphan
	}

	option = {
		name = EVTOPTD_HIDDEN_EVENT
		ai_chance = {
			factor = 25
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					is_childhood_focus_set_trigger = no
				}
			}

			random_list = {
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_humility
					}
				}
				10 = {
					event_target:mod_event_target_orphan = {
						set_focus = focus_ch_etiquette
					}
				}
			}
		}

		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
		clear_event_target = mod_event_target_orphan
	}
}


#------------------------------------------------------------------------------#
# 고아에게 교육 목표를 설정한다 (12세 이상) (4091~4093) / 트리거 이벤트        #
# Conclave DLC 가 있는 경우에만 (자동으로) 설정된다.                           #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4091
	hide_window = yes
	
	ai = no
			
	trigger = {

		#----------------------------------------------------------------------#
		# 비밀회의 DLC 대응 기능이므로 DLC 체크를 한다.                        #
		#----------------------------------------------------------------------#
		
		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# 일반 상태의 플레이어 확인 (성인)                                     #
		#----------------------------------------------------------------------#

		is_common_player_trigger = yes

		#----------------------------------------------------------------------#
		# 건물 : 최소한 고아원 레벨 1 이상의 고아원 건물이 필요                #
		#----------------------------------------------------------------------#

		OR = {
			has_orphanage_level_1_trigger = yes
			has_orphanage_level_2_trigger = yes
			has_orphanage_level_3_trigger = yes
			has_orphanage_level_4_trigger = yes
		}

		#----------------------------------------------------------------------#
		# 12세 이상의 미성년 고아에게                                          #
		# - 아직 교육 목표가 설정되지 않았을 것                                #
		# - 다른 캐릭터가 보호자로 설정되지 않았을 것                          #
		#----------------------------------------------------------------------#

		any_realm_character = {
			OR = {
				trait = rescued_orphan_by_ai
				trait = rescued_orphan_by_player
			}
			age = 12
			is_adult = no

			NOT = { has_focus = focus_ch_pride }
			NOT = { has_focus = focus_ch_humility }
			NOT = { has_focus = focus_ch_duty }
			NOT = { has_focus = focus_ch_etiquette }
			NOT = { has_focus = focus_ch_thrift }
			NOT = { has_focus = focus_ch_faith }
			NOT = { has_focus = focus_ch_struggle }
			NOT = { has_focus = focus_ch_heritage }

			NOT = { has_focus = focus_ed_diplomacy }
			NOT = { has_focus = focus_ed_martial }
			NOT = { has_focus = focus_ed_stewardship }
			NOT = { has_focus = focus_ed_intrigue }
			NOT = { has_focus = focus_ed_learning }

			liege = {
				ai = no
			}
			is_orphan_in_orphanage_trigger = no
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		random_realm_character = {
			limit = {
				OR = {
					trait = rescued_orphan_by_ai
					trait = rescued_orphan_by_player
				}
				age = 12
				is_adult = no

				NOT = { has_focus = focus_ch_pride }
				NOT = { has_focus = focus_ch_humility }
				NOT = { has_focus = focus_ch_duty }
				NOT = { has_focus = focus_ch_etiquette }
				NOT = { has_focus = focus_ch_thrift }
				NOT = { has_focus = focus_ch_faith }
				NOT = { has_focus = focus_ch_struggle }
				NOT = { has_focus = focus_ch_heritage }

				NOT = { has_focus = focus_ed_diplomacy }
				NOT = { has_focus = focus_ed_martial }
				NOT = { has_focus = focus_ed_stewardship }
				NOT = { has_focus = focus_ed_intrigue }
				NOT = { has_focus = focus_ed_learning }

				liege = {
					ai = no
				}
				is_orphan_in_orphanage_trigger = no
			}
			character_event = {
				id = OPG.4092
			}
		}
	}
}

character_event = {

	id = OPG.4092

	hide_window = yes
	is_triggered_only = yes

	immediate = {

		#----------------------------------------------------------------------#
		# 플레이어를 괴롭히지 않도록, 선택지의 선택은 보호자가 한다.           #
		# 비밀회의 DLC 를 전제로 하므로 educator 로 호출한다.                  #
		#----------------------------------------------------------------------#

		educator = {
			save_event_target_as = mod_event_target_educator
		}

		#----------------------------------------------------------------------#
		# 주 이벤트 타겟을 설정한다.                                           #
		#----------------------------------------------------------------------#

		ROOT = {
			save_event_target_as = mod_event_target_orphan
		}
		FROM = {
			save_event_target_as = mod_event_target_player
		}

		#----------------------------------------------------------------------#
		# 고아원 보모에게 이벤트 실행                                          #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			character_event = {
				id = OPG.4093
			}
		}
	}
}

character_event = {

	id = OPG.4093
	desc = EVTDESC_HIDDEN_EVENT
	picture = GFX_evt_nemo_blank

	# 플레이어 : mod_event_target_player
	# 고아     : mod_event_target_orphan
	# 결정자   : mod_event_target_educator (ROOT)

	is_triggered_only = yes

	option = {
		name = EVTOPTA_HIDDEN_EVENT

		#----------------------------------------------------------------------#
		# 조건에 따라서 랜덤하게 교육 목표를 지정한다. 유년기에 얻은 유년기 특 #
		# 성 트레잇이 선택에 영향을 미친다.                                    #
		#----------------------------------------------------------------------#

		random_list = {
			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = affectionate
					}
				}
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = curious
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = willful
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = fussy
					}
				}
				event_target:mod_event_target_orphan = {
					set_focus = focus_ed_diplomacy
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = rowdy
					}
				}
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = willful
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = timid
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = idolizer
					}
				}
				event_target:mod_event_target_orphan = {
					set_focus = focus_ed_martial
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = brooding
					}
				}
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = conscientious
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = indolent
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = haughty
					}
				}
				event_target:mod_event_target_orphan = {
					set_focus = focus_ed_stewardship
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = playful
					}
				}
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = fussy
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = rowdy
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = affectionate
					}
				}
				event_target:mod_event_target_orphan = {
					set_focus = focus_ed_intrigue
				}
			}
			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = timid
					}
				}
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						trait = idolizer
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = brooding
					}
				}
				modifier = {
					factor = 0.5
					event_target:mod_event_target_orphan = {
						trait = playful
					}
				}
				event_target:mod_event_target_orphan = {
					set_focus = focus_ed_learning
				}
			}
		}

		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
		clear_event_target = mod_event_target_orphan
	}
}








#------------------------------------------------------------------------------#
# 봉신/가신에게 맡겨진 고아의 학대 사실을 발견함 : On-Actions 이벤트           #
# - 첩보관이 action_uncover_plots 임무를 수행하고 있을 것 (위치는 무관)        #
# - 1년에 한 번 발생                                                           #
# - 모두 발견되는 게 아님.                                                     #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4101
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Spymaster

	trigger = {

		#----------------------------------------------------------------------#
		# 모드 셋업 여부 확인                                                  #
		#----------------------------------------------------------------------#

		has_global_flag = MOD_NEMO_OPG_SETUP_OK

		#----------------------------------------------------------------------#
		# Conclave DLC 가 필요함                                               #
		#----------------------------------------------------------------------#

		has_dlc = "Zeus"

		#----------------------------------------------------------------------#
		# 플레이어의 첩보관이고, 현재 스파이 임무를 수행하고 있을 것           #
		#----------------------------------------------------------------------#
		
		liege = {
			ai = no
		}
		has_job_title = job_spymaster
		has_job_action = action_uncover_plots
	}

	immediate = {

		#----------------------------------------------------------------------#
		# 첩보관의 음모 수치에 따라서, 일정 확률로 이벤트를 중단시킨다.        #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				intrigue = 15
				NOT = { intrigue = 20 }
			}
			random = {
				chance = 10
				break = yes
			}
		}

		if = {
			limit = {
				intrigue = 10
				NOT = { intrigue = 15 }
			}
			random = {
				chance = 25
				break = yes
			}
		}

		if = {
			limit = {
				intrigue = 5
				NOT = { intrigue = 10 }
			}
			random = {
				chance = 50
				break = yes
			}
		}

		if = {
			limit = {
				NOT = { intrigue = 5 }
			}
			random = {
				chance = 90
				break = yes
			}
		}

		#----------------------------------------------------------------------#
		# 발견해야 하는 것 :                                                   #
		#                                                                      #
		# mod_nemo_event_flag_punished_orphan_child                            #
		# mod_nemo_event_flag_severely_punished_orphan_child                   #
		# mod_nemo_event_flag_sexual_harassment_orphan_child                   #
		# mod_nemo_event_flag_sexually_abused_orphan_child                     #
		# mod_nemo_event_flag_homosexually_abused_orphan_child                 #
		#----------------------------------------------------------------------#

		liege = {
			random_realm_character = {
				limit = {
					OR = {
						trait = rescued_orphan_by_player
						trait = rescued_orphan_by_ai
					}

					is_liege_human_player_character_trigger = yes

					age = 6
					is_adult = no

					is_orphan_in_orphanage_trigger = no

					OR = {
						has_character_flag = mod_nemo_event_flag_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
						has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child
						has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
					}

					NOT = { has_character_flag = mod_nemo_event_flag_neglected_orphan_child }
				}
				character_event = {
					id = OPG.4102
				}
			}
		}
	}
}

character_event = {
	id = OPG.4102
	hide_window = yes

	is_triggered_only = yes

	# ROOT : Orphan, FROM : Spymaster

	immediate = {

		if = {
			limit = {
				any_opinion_modifier_target = {
					reverse_has_opinion_modifier = {
						who = ROOT
						modifier = opinion_mod_char_punished_harassed_or_abused_orphan
					}
					is_alive = yes
				}
			}

			#------------------------------------------------------------------#
			# 당시의 교육자/보호자가 살아 있어야만 동작한다.                   #
			#------------------------------------------------------------------#

			any_opinion_modifier_target = {
				limit = {
					reverse_has_opinion_modifier = {
						who = ROOT
						modifier = opinion_mod_char_punished_harassed_or_abused_orphan
					}
					is_alive = yes
				}
				save_event_target_as = mod_event_target_educator
			}

			ROOT = {
				save_event_target_as = mod_event_target_orphan
			}

			FROM = {
				save_event_target_as = mod_event_target_spymaster
				character_event = {
					id = OPG.4103
				}	
			}

			break = yes
		}

		#----------------------------------------------------------------------#
		# 다음으로 넘어갈 수 없었다면, 오피니언 모디파이어가 유효하지 않거나   #
		# 당시의 보호자가 사망한 것으로 볼 수 있으므로 표시자를 삭제한다.      #
		#----------------------------------------------------------------------#

		clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
	}
}

character_event = {
	id = OPG.4103
	hide_window = yes

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster (ROOT)
	# mod_event_target_player
	# mod_event_target_educator

	immediate = {

		#----------------------------------------------------------------------#
		# 플레이어에게 타겟을 잡고..                                           #
		#----------------------------------------------------------------------#

		liege = {
			save_event_target_as = mod_event_target_player
		}

		#----------------------------------------------------------------------#
		# 종류에 따라 이벤트를 발생시킨다.                                     #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_nemo_event_flag_punished_orphan_child
				}
			}
			liege = {
				character_event = {
					id = OPG.4111
				}
			}
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
				}
			}
			liege = {
				character_event = {
					id = OPG.4112
				}
			}
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_nemo_event_flag_sexual_harassment_orphan_child
				}
			}
			liege = {
				character_event = {
					id = OPG.4113
				}
			}
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
				}
			}
			liege = {
				character_event = {
					id = OPG.4114
				}
			}
		}

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
				}
			}
			liege = {
				character_event = {
					id = OPG.4115
				}
			}
		}
	}
}

#------------------------------------------------------------------------------#

character_event = {
	id = OPG.4111
	desc = EVTDESC_OPG_4111
	picture = GFX_evt_nemo_orphan_punished_by_guardian

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	option = {
		name = EVTOPTA_OPG_4111

		#----------------------------------------------------------------------#
		# A. 어린애들에게 회초리를 쓰는 게 뭐가 문제인가?                      #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 보너스를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_condone_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTB_OPG_4111

		#----------------------------------------------------------------------#
		# B. 딱히 문제될 게 없다면 내버려 두라.                                #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTC_OPG_4111

		#----------------------------------------------------------------------#
		# C. 그래도 자제하도록 주의를 주도록 하라.                             #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 페널티를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_warned_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}
}

character_event = {
	id = OPG.4112
	desc = EVTDESC_OPG_4112
	picture = GFX_evt_nemo_orphan_punished_by_guardian_severely

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	option = {
		name = EVTOPTA_OPG_4112

		#----------------------------------------------------------------------#
		# A. 애들의 버릇을 고치려다 보면 그럴 수도 있지                        #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 보너스를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_condone_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTB_OPG_4112

		#----------------------------------------------------------------------#
		# B. 정상을 참작해서 경고하고 소액의 벌금을 물리도록 하라              #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 페널티를 받는다.                     #
		# 수입의 10%에 해당하는 벌금을 징수한다.                               #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_warned_vassal_abuse_orphan
			}

			transfer_scaled_wealth = {
				to = ROOT
				value = 0.1
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTC_OPG_4112

		#----------------------------------------------------------------------#
		# C. 그러라고 맡긴 게 아니다. 아이를 데려오고 그 자는 투옥할 것이다.   #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 고아의 후견이 해제되고 고아원으로 복귀한다                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes

			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 전 보호자에 대해서 2년간 투옥 명분을 얻는다.                         #
		#----------------------------------------------------------------------#

		ROOT = {
			opinion = {
				who = event_target:mod_event_target_educator
				modifier = opinion_mod_char_reason_imprisoning
				years = 2
			}
		}
	}

	option = {
		name = EVTOPTD_OPG_4112

		#----------------------------------------------------------------------#
		# D. 이건 좋은 협박의 재료로 쓸 수 있겠군.                             #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			character_event = {
				id = OPG.4121
				days = 7
				random = 7
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}
}


character_event = {
	id = OPG.4113
	desc = EVTDESC_OPG_4113
	picture = GFX_evt_nemo_orphan_sexually_harassed_by_guardian

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	option = {
		name = EVTOPTA_OPG_4113

		#----------------------------------------------------------------------#
		# A. 그 아이들은 그런 것도 가르칠 필요가 있을지도. 내버려 두라.        #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 보너스를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_condone_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTB_OPG_4113

		#----------------------------------------------------------------------#
		# B. 이해는 하지만 괘씸하군. 앞으로 그러지 않도록 경고하도록 하라.     #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 페널티를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_warned_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTC_OPG_4113

		#----------------------------------------------------------------------#
		# C. 도가 지나치다. 벌금을 물리고 강하게 경고하도록 하라.              #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 페널티를 받는다.                     #
		# 수입의 40%에 해당하는 벌금을 물린다.                                 #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_warned_vassal_abuse_orphan
			}

			transfer_scaled_wealth = {
				to = ROOT
				value = 0.4
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTD_OPG_4113

		#----------------------------------------------------------------------#
		# D. 그러라고 맡긴 게 아니다. 처벌하고 아이는 데려와라.                #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 고아의 후견이 해제되고 고아원으로 복귀한다                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 전 보호자에 대해서 1년간 투옥 명분을 얻는다.                         #
		#----------------------------------------------------------------------#

		ROOT = {
			opinion = {
				who = event_target:mod_event_target_educator
				modifier = opinion_mod_char_reason_imprisoning
				years = 1
			}
		}
	}
}


character_event = {
	id = OPG.4114
	desc = EVTDESC_OPG_4114
	picture = GFX_evt_nemo_orphan_sexually_abused_by_guardian

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	option = {
		name = EVTOPTA_OPG_4114

		#----------------------------------------------------------------------#
		# A. 보호자의 자유다. 간섭하지 말라.                                   #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 보너스를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_condone_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTB_OPG_4114

		#----------------------------------------------------------------------#
		# B. 괘씸하군. 경고하고 벌금을 물리도록 하라.                          #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 페널티를 받는다.                     #
		# 수입의 80%에 해당하는 벌금을 징수한다.                               #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_warned_vassal_abuse_orphan
			}

			transfer_scaled_wealth = {
				to = ROOT
				value = 0.8
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTC_OPG_4114

		#----------------------------------------------------------------------#
		# C. 용서할 수 없다. 아이는 데려오고, 이 자는 감옥에 가둘 것이다.      #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 고아의 후견이 해제되고 고아원으로 복귀한다                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 전 보호자에 대해서 3년간 작위 회수 및 투옥 명분을 얻는다.            #
		#----------------------------------------------------------------------#

		ROOT = {
			opinion = {
				who = event_target:mod_event_target_educator
				modifier = opinion_mod_char_reason_revoking_imprisoning
				years = 3
			}
		}
	}

	option = {
		name = EVTOPTD_OPG_4114

		#----------------------------------------------------------------------#
		# D. 그래? 좋은 협박의 재료로 쓸 수 있겠는걸?                          #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			character_event = {
				id = OPG.4121
				days = 7
				random = 7
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}
}


character_event = {
	id = OPG.4115
	desc = EVTDESC_OPG_4115
	picture = GFX_evt_nemo_orphan_sexually_abused_by_homosexual_guardian

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	option = {
		name = EVTOPTA_OPG_4115

		#----------------------------------------------------------------------#
		# A. 보호자의 자유다. 간섭하지 말라.                                   #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 보너스를 받는다.                     #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_condone_vassal_abuse_orphan
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTB_OPG_4115

		#----------------------------------------------------------------------#
		# B. 괘씸하군. 벌금을 물리도록 하라.                                   #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 5년간의 우호도 페널티를 받는다.                     #
		# 수입의 120%에 해당하는 벌금을 징수한다.                              #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_warned_vassal_abuse_orphan
			}

			transfer_scaled_wealth = {
				to = ROOT
				value = 1.2
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}

	option = {
		name = EVTOPTC_OPG_4115

		#----------------------------------------------------------------------#
		# C. 용서할 수 없다. 아이는 데려오고, 이 자는 감옥에 가둘 것이다.      #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 고아의 후견이 해제되고 고아원으로 복귀한다                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 전 보호자에 대해서 3년간 작위 회수 및 투옥 명분을 얻는다.            #
		#----------------------------------------------------------------------#

		ROOT = {
			opinion = {
				who = event_target:mod_event_target_educator
				modifier = opinion_mod_char_reason_revoking_imprisoning
				years = 3
			}
		}
	}

	option = {
		name = EVTOPTD_OPG_4115

		#----------------------------------------------------------------------#
		# D. 그래? 좋은 협박의 재료로 쓸 수 있겠는걸?                          #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			character_event = {
				id = OPG.4121
				days = 7
				random = 7
			}
		}

		#----------------------------------------------------------------------#
		# 첩보관이 다시 문제삼지 않도록 플래그를 넣는다.                       #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			set_character_flag = mod_nemo_event_flag_neglected_orphan_child
		}
	}
}

#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4121
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = {
			character_event = {
				id = OPG.4122
			}
		}
	}
}

character_event = {
	id = OPG.4122
	desc = EVTDESC_OPG_4122
	picture = GFX_evt_nemo_common_discuss

	is_triggered_only = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	option = {
		name = EVTOPTA_OPG_4122

		#----------------------------------------------------------------------#
		# A. 훗날을 도모하기 위한 호의를 요구한다.                             #
		#----------------------------------------------------------------------#

		trigger = {
			event_target:mod_event_target_educator = {
				NOT = { owes_favor_to = ROOT }
			}
		}
		hidden_tooltip = {
			event_target:mod_event_target_educator = {
				character_event = {
					id = OPG.4123
				}
			}		
		}

	}
	option = {
		name = EVTOPTB_OPG_4122

		#----------------------------------------------------------------------#
		# B. 모든 파벌에서 탈퇴하고 충성할 것을 요구한다                       #
		#----------------------------------------------------------------------#

		trigger = {
			event_target:mod_event_target_educator = {
				NOT = {
					has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_leaving_faction }
				}
			}
		}
		hidden_tooltip = {
			event_target:mod_event_target_educator = {
				character_event = {
					id = OPG.4125
				}
			}		
		}
	}
	option = {
		name = EVTOPTC_OPG_4122

		#----------------------------------------------------------------------#
		# C. 불가침 조약의 체결을 요구한다.                                    #
		#----------------------------------------------------------------------#

		trigger = {
			event_target:mod_event_target_educator = {
				NOT = {
					has_non_aggression_pact_with = ROOT
				}
			}
		}
		hidden_tooltip = {
			event_target:mod_event_target_educator = {
				character_event = {
					id = OPG.4127
				}
			}		
		}
	}
	option = {
		name = EVTOPTD_OPG_4122

		#----------------------------------------------------------------------#
		# D. 스스로 목숨을 끊을 것을 요구한다.                                 #
		#----------------------------------------------------------------------#

		hidden_tooltip = {
			event_target:mod_event_target_educator = {
				character_event = {
					id = OPG.4129
				}
			}		
		}
	}
	option = {
		name = EVTOPTE_OPG_4122

		#----------------------------------------------------------------------#
		# E. 입막음 뇌물을 요구한다.                                           #
		#----------------------------------------------------------------------#

		hidden_tooltip = {
			event_target:mod_event_target_educator = {
				character_event = {
					id = OPG.4131
				}
			}		
		}
	}
}

character_event = {

	id = OPG.4123
	hide_window = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator
	
	is_triggered_only = yes

	#--------------------------------------------------------------------------#
	# 호의 요구는 거절되지 않는다.                                             #
	#--------------------------------------------------------------------------#

	immediate = {
		event_target:mod_event_target_player = {
			character_event = {
				id = OPG.4124
			}
		}
	}
}

character_event = {

	id = OPG.4124
	desc = EVTDESC_OPG_4124
	picture = GFX_evt_throne_room

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4124

		#----------------------------------------------------------------------#
		# 호의를 빚진 것으로 처리                                              #
		#----------------------------------------------------------------------#

		ROOT = {
			add_favor = event_target:mod_event_target_educator
		}

		#----------------------------------------------------------------------#
		# 호의의 경우 고아를 돌려보내지 않는다.                                #
		#----------------------------------------------------------------------#

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_spymaster
		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
	}
}

character_event = {

	id = OPG.4125
	hide_window = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator
	
	is_triggered_only = yes

	#--------------------------------------------------------------------------#
	# 파벌 탈퇴 및 충성 요구                                                   #
	#--------------------------------------------------------------------------#

	immediate = {
		random_list = {

			#------------------------------------------------------------------#
			# 요구를 받아들인다.                                               #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						OR = {
							has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
							has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						}
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 12
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 14
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 16
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 18
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 20
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4126
					}
				}
			}

			#------------------------------------------------------------------#
			# 요구를 거절한다.                                                 #
			#------------------------------------------------------------------#

			50 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 10 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 8 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 6 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 4 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 2 }
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4133
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4126
	desc = EVTDESC_OPG_4126
	picture = GFX_evt_throne_room

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4126

		#----------------------------------------------------------------------#
		# 모든 파벌에서 탈퇴                                                   #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = liege
				modifier = opinion_coerced_into_leaving_faction
				months = 1200
			}
		}

		#----------------------------------------------------------------------#
		# 고아는 고아원으로 돌아온다                                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 이벤트 타겟 초기화                                                   #
		#----------------------------------------------------------------------#

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_spymaster
		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
	}
}


character_event = {

	id = OPG.4127
	hide_window = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator
	
	is_triggered_only = yes

	#--------------------------------------------------------------------------#
	# 불가침 조약 체결 요구                                                    #
	#--------------------------------------------------------------------------#

	immediate = {
		random_list = {

			#------------------------------------------------------------------#
			# 요구를 받아들인다.                                               #
			#------------------------------------------------------------------#

			40 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						OR = {
							has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
							has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						}
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 12
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 14
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 16
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 18
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 20
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4128
					}
				}
			}

			#------------------------------------------------------------------#
			# 요구를 거절한다.                                                 #
			#------------------------------------------------------------------#

			60 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 10 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 8 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 6 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 4 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 2 }
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4133
					}
				}
			}
		}
	}
}


character_event = {

	id = OPG.4128
	desc = EVTDESC_OPG_4128
	picture = GFX_evt_throne_room

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4128

		#----------------------------------------------------------------------#
		# 10년간의 불가침 조약 체결                                            #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = in_non_aggression_pact
				years = 10
			}
		}

		#----------------------------------------------------------------------#
		# 고아는 고아원으로 돌아온다                                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 이벤트 타겟 초기화                                                   #
		#----------------------------------------------------------------------#

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_spymaster
		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
	}
}



character_event = {

	id = OPG.4129
	hide_window = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator
	
	is_triggered_only = yes

	#--------------------------------------------------------------------------#
	# 불가침 조약 체결 요구                                                    #
	#--------------------------------------------------------------------------#

	immediate = {
		random_list = {

			#------------------------------------------------------------------#
			# 요구를 받아들인다.                                               #
			#------------------------------------------------------------------#

			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						OR = {
							has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
							has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						}
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 12
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 14
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 16
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 18
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 20
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4130
					}
				}
			}

			#------------------------------------------------------------------#
			# 요구를 거절한다.                                                 #
			#------------------------------------------------------------------#

			80 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 10 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 8 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 6 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 4 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 2 }
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4133
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4130
	desc = EVTDESC_OPG_4130
	picture = GFX_evt_throne_room

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4130

		#----------------------------------------------------------------------#
		# 며칠 안에 자살할 것을 약속                                           #
		#----------------------------------------------------------------------#
		
		hidden_tooltip = {
			event_target:mod_event_target_player = {
				character_event = {
					id = OPG.4134
					days = 7
					random = 7
				}
			}		
		}

		#----------------------------------------------------------------------#
		# 고아는 고아원으로 돌아온다                                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}
	}
}


character_event = {

	id = OPG.4131
	hide_window = yes

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator
	
	is_triggered_only = yes

	#--------------------------------------------------------------------------#
	# 입막음 뇌물 요구                                                         #
	#--------------------------------------------------------------------------#

	immediate = {
		random_list = {

			#------------------------------------------------------------------#
			# 요구를 받아들인다.                                               #
			#------------------------------------------------------------------#

			80 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						OR = {
							has_character_flag = mod_nemo_event_flag_homosexually_abused_orphan_child
							has_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child
						}
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 10
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 12
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 14
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 16
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 18
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						intrigue = 20
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4132
					}
				}
			}

			#------------------------------------------------------------------#
			# 요구를 거절한다.                                                 #
			#------------------------------------------------------------------#

			20 = {
				modifier = {
					factor = 2.0
					event_target:mod_event_target_orphan = {
						has_character_flag = mod_nemo_event_flag_severely_punished_orphan_child
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 10 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 8 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 6 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 4 }
					}
				}
				modifier = {
					factor = 1.2
					event_target:mod_event_target_player = {
						NOT = { intrigue = 2 }
					}
				}
				event_target:mod_event_target_player = {
					character_event = {
						id = OPG.4133
					}
				}
			}
		}
	}
}

character_event = {

	id = OPG.4132
	desc = EVTDESC_OPG_4132
	picture = GFX_evt_throne_room

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4132

		#----------------------------------------------------------------------#
		# 입막음 뇌물을 제공                                                   #
		#----------------------------------------------------------------------#
	
		event_target:mod_event_target_player = {
			wealth = event_target:mod_event_target_educator
		}
		event_target:mod_event_target_educator = {
			clear_wealth = yes
		}

		#----------------------------------------------------------------------#
		# 고아는 고아원으로 돌아온다                                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 이벤트 타겟 초기화                                                   #
		#----------------------------------------------------------------------#

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_spymaster
		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
	}
}


character_event = {
	id = OPG.4133
	desc = EVTDESC_OPG_4133
	picture = GFX_evt_nemo_common_discuss

	# mod_event_target_orphan
	# mod_event_target_spymaster
	# mod_event_target_player (ROOT)
	# mod_event_target_educator

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4133

		#----------------------------------------------------------------------#
		# 거절로 인한 우호도 페널티, 플레이어는 투옥과 작위회수 명분을 얻는다  #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_threat_is_not_working
			}
		}

		event_target:mod_event_target_player = {
			opinion = {
				who = event_target:mod_event_target_educator
				modifier = opinion_mod_char_reason_revoking_imprisoning
			}
		}

		#----------------------------------------------------------------------#
		# 고아는 고아원으로 돌아온다                                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			clear_flag_modifier_orphan_under_guardianship_effect = yes
			move_character = ROOT
			remove_guardian = yes
		}

		#----------------------------------------------------------------------#
		# 이벤트 타겟 초기화                                                   #
		#----------------------------------------------------------------------#

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_spymaster
		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
	}
}

character_event = {
	id = OPG.4134
	desc = EVTDESC_OPG_4134
	picture = GFX_evt_nemo_suicided

	is_triggered_only = yes

	option = {
		name = EVTOPTA_OPG_4134

		#----------------------------------------------------------------------#
		# 해당 가신/봉신이 자살한다.                                           #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_educator = {
			death = {
				death_reason = death_suicide
			}
		}

		#----------------------------------------------------------------------#
		# 이벤트 타겟 초기화                                                   #
		#----------------------------------------------------------------------#

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_spymaster
		clear_event_target = mod_event_target_player
		clear_event_target = mod_event_target_educator
	}
}


#------------------------------------------------------------------------------#
# 후견이 끝난 고아가 돌아오지 않는다 : 강제로 보호자의 첩이 됨                 #
#------------------------------------------------------------------------------#

character_event = {

	id = OPG.4141
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		
		#----------------------------------------------------------------------#
		# 우선 원래의 후견인에게 돌려놓기 위해, 모디파이어를 체크              #
		# (after 가 뜨면 오피니언 모디파이어를 삭제하지 않음)                  #
		#----------------------------------------------------------------------#

		any_opinion_modifier_target = {
			limit = {
				reverse_has_opinion_modifier = {
					who = PREV
					modifier = opinion_mod_char_punished_harassed_or_abused_orphan
				}
			}
			save_event_target_as = mod_event_target_vassal
		}

		liege = {
			save_event_target_as = mod_event_target_player
		}

		#----------------------------------------------------------------------#
		# 현재 체제가 첩을 허용하지 않으면 이벤트는 취소된다.                  #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				event_target:mod_event_target_vassal = {
					NOT = { has_concubinage = yes }
				}
			}

			clr_character_flag = mod_nemo_event_flag_sexually_abused_orphan_child_after

			remove_opinion = {
				who = event_target:mod_event_target_vassal
				modifier = opinion_mod_char_punished_harassed_or_abused_orphan
			}

			clear_event_target = mod_event_target_vassal
			clear_event_target = mod_event_target_player

			character_event = {
				id = OPG.2342
				days = 7
			}
			break = yes
		}

		#----------------------------------------------------------------------#
		# 해당 고아가 봉신에게 이동되고 첩이 된다.                             #
		#----------------------------------------------------------------------#

		move_character = event_target:mod_event_target_vassal

		event_target:mod_event_target_vassal = {
			add_consort = ROOT
		}

		save_event_target_as = mod_event_target_orphan

		#----------------------------------------------------------------------#
		# 플레이어에게 이벤트 발생                                             #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_player = {
			character_event = {
				id = OPG.4142
				days = 7
			}
		}
	}
}

character_event = {

	id = OPG.4142
	desc = EVTDESC_OPG_4142
	picture = GFX_evt_nemo_orphan_is_grown_up
	
	is_triggered_only = yes

	option = {

		name = EVTOPTA_OPG_4142

		#----------------------------------------------------------------------#
		# A. 현상을 인정하고 승인한다.                                         #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신과 10년간의 우호도 보너스를 받는다.                    #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_vassal = {
			opinion = {
				who = ROOT
				modifier = opinion_mod_char_condone_vassal_abuse_orphan
				months = 120
			}
		}

		#----------------------------------------------------------------------#
		# 고아가 돌아오지 않으므로, 플래그 등을 여기서 정리한다.               #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_vassal = {
			add_lover = event_target:mod_event_target_orphan
		}

		#----------------------------------------------------------------------#
		# 가신/봉신에게 양육됨 플래그를 삭제한다.                              #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_event_character_flag_guardian_selected_orphan
				}
			}
			event_target:mod_event_target_orphan = {
				clear_flag_modifier_orphan_under_guardianship_effect = yes
				clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			}
		}

		#----------------------------------------------------------------------#
		# 미성년 고아 모디파이어/오피니언 모디파이어를 제거하고 고아 트레잇도  #
		# 제거한다.                                                            #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {

			remove_opinion = {
				who = event_target:mod_event_target_vassal
				modifier = opinion_mod_char_punished_harassed_or_abused_orphan
			}

			remove_orphan_character_flag_effect = yes
			remove_orphan_character_flag_reminiscence_effect = yes
			remove_orphan_character_flag_intrigue_effect = yes
			remove_orphan_character_relative_opinion_modifier_effect = yes
			remove_orphan_character_relative_opinion_intrigue_modifier_effect = yes
			remove_orphan_character_trait_effect = yes
		}

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_vassal
		clear_event_target = mod_event_target_player
	}

	option = {

		name = EVTOPTB_OPG_4142

		#----------------------------------------------------------------------#
		# B. 체포 명령을 내린다.                                               #
		#----------------------------------------------------------------------#

		#----------------------------------------------------------------------#
		# 해당 봉신/가신에 대해 10년간의 투옥/작위회수 명분을 얻는다.          #
		#----------------------------------------------------------------------#

		opinion = {
			who = event_target:mod_event_target_vassal
			modifier = opinion_mod_char_reason_revoking_imprisoning
			years = 10
		}

		#----------------------------------------------------------------------#
		# 고아는 복귀하여 보통의 가신이 된다.                                  #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {
			remove_consort = event_target:mod_event_target_vassal
			move_character = ROOT
		}

		#----------------------------------------------------------------------#
		# 가신/봉신에게 양육됨 플래그를 삭제한다.                              #
		#----------------------------------------------------------------------#

		if = {
			limit = {
				event_target:mod_event_target_orphan = {
					has_character_flag = mod_event_character_flag_guardian_selected_orphan
				}
			}
			event_target:mod_event_target_orphan = {
				clear_flag_modifier_orphan_under_guardianship_effect = yes
				clear_abuse_flag_modifier_orphan_under_guardianship_effect = yes
			}
		}

		#----------------------------------------------------------------------#
		# 미성년 고아 모디파이어/오피니언 모디파이어를 제거하고 성년 오피니언  #
		# 모디파이어로 대체한다.                                               #
		#----------------------------------------------------------------------#

		event_target:mod_event_target_orphan = {

			opinion = {
				who = ROOT
				modifier = opinion_mod_cm_adult_orphan_normal_courtier
			}

			remove_orphan_character_flag_effect = yes
			remove_orphan_character_flag_reminiscence_effect = yes
			remove_orphan_character_flag_intrigue_effect = yes
			remove_orphan_character_relative_opinion_modifier_effect = yes
			remove_orphan_character_relative_opinion_intrigue_modifier_effect = yes
		}

		clear_event_target = mod_event_target_orphan
		clear_event_target = mod_event_target_vassal
		clear_event_target = mod_event_target_player
	}
}
