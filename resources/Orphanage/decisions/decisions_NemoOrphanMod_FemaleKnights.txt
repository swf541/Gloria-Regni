# This text file is a mod script file which uses by the Crusader Kings 2

## In vassal decision, FROM is Player and ROOT is Target NPC. ##################

decisions = {

	mod_main_decision_revassalize_female_knights = {

		is_high_prio = yes

		potential = {

			#------------------------------------------------------------------#
			# 모드 셋업 여부 확인                                              #
			#------------------------------------------------------------------#

			has_global_flag = MOD_NEMO_OPG_SETUP_OK

			#------------------------------------------------------------------#
			# 일반 상태의 플레이어 확인                                        #
			#------------------------------------------------------------------#

			is_common_player_trigger = yes

			#------------------------------------------------------------------#
			# 백합 기사단 타이틀 활성화 여부 확인                              #
			#------------------------------------------------------------------#

			is_female_knights_title_active_trigger = yes

			#------------------------------------------------------------------#
			# 백합 기사단이 현재 독립 군주 상태일 것                           #
			#------------------------------------------------------------------#

			d_female_knights_band = {
				holder_scope = {
					independent = yes
				}
			}

			#------------------------------------------------------------------#
			# 플레이어의 작위가 왕 이상일 것                                   #
			#------------------------------------------------------------------#

			OR = {
				tier = KING
				tier = EMPEROR
			}
		}

		allow = {
			#------------------------------------------------------------------#
			# 플레이어의 작위가 왕 이상일 것                                   #
			#------------------------------------------------------------------#

			OR = {
				tier = KING
				tier = EMPEROR
			}

			#------------------------------------------------------------------#
			# 백합 기사단이 현재 독립 군주 상태일 것                           #
			#------------------------------------------------------------------#

			d_female_knights_band = {
				holder_scope = {
					independent = yes
				}
			}
		}
		effect = {

			#------------------------------------------------------------------#
			# 다시 주/종 관계를 연결하고, 상속법을 수정한다.                   #
			#------------------------------------------------------------------#

			d_female_knights_band = {
				holder_scope = {
					ROOT = {
						set_defacto_vassal = PREV
					}
				}

				set_female_knights_succession_law_effect = yes
			}

			recalc_succession = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0	
		}
	}
}