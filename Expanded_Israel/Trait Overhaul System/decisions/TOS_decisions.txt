#Trait Overhaul System Decisions by Preacher
decisions = {
#Martial
#Martial Discipline
	purchase_athletic_I = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			has_building = ca_militia_barracks_1
		}
	
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = athletic_I
		}
		
		custom_tooltip = { text = athletics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
			
		ai_will_do = {
			factor = 0.5 
		}
	}
	
	upgrade_athletic_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = athletic_I 
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = athletic_I 
			has_building = ca_militia_barracks_2
		}
	
		effect = {
			remove_trait = athletic_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = athletic_II
		}
		custom_tooltip = { text = athletics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
	
		ai_will_do = {
			factor = 1
		}
	}

	
	upgrade_athletic_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = athletic_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = athletic_II
			has_building = ca_militia_barracks_3
		}
	
		effect = {
			remove_trait = athletic_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = athletic_III 
		}
		custom_tooltip = { text = athletics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
	
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_athletic_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = athletic_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = athletic_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = athletic_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = athletic_IV 
		}
		custom_tooltip = { text = athletics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
#Athletic Traits

		purchase_manouvering_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = athletic_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = athletic_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = manouvering_I 
			}
			
			custom_tooltip = { text = manouvering_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } } 
			
			ai_will_do = {
				factor = 0.5
			}
		}
		
		upgrade_manouvering_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = athletic_II 
				trait = manouvering_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = athletic_II 
				trait = manouvering_I
				has_building = ca_militia_barracks_2
			}	
			
			effect = {
				remove_trait = manouvering_I
				subtract_variable = { which = experience_cost which = experience_pool } 
				add_trait = manouvering_II 
			}
			
			custom_tooltip = { text = manouvering_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } } 
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_manouvering_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = athletic_III
				trait = manouvering_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = athletic_III
				trait = manouvering_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = manouvering_II
				subtract_variable = { which = experience_cost which = experience_pool } 
				add_trait = manouvering_III 
			}
			
			custom_tooltip = { text = manouvering_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } } 
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_manouvering_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = athletic_IV
				trait = manouvering_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = athletic_IV
				trait = manouvering_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = manouvering_III
				subtract_variable = { which = experience_cost which = experience_pool } 
				add_trait = manouvering_IV 
			}
			
			custom_tooltip = { text = manouvering_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_combat_arts_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = athletic_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = athletic_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool } 
				add_trait = combat_arts_I 
			}
			
			custom_tooltip = { text = combat_arts_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_combat_arts_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = athletic_II
				trait = combat_arts_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = athletic_II
				trait = combat_arts_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = combat_arts_I
				subtract_variable = { which = experience_cost which = experience_pool } 
				add_trait = combat_arts_II 
			}
			
			custom_tooltip = { text = combat_arts_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_combat_arts_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = athletic_III
				trait = combat_arts_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = athletic_III
				trait = combat_arts_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = combat_arts_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = combat_arts_III
			}
			
			custom_tooltip = { text = combat_arts_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_combat_arts_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = athletic_IV
				trait = combat_arts_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = athletic_IV
				trait = combat_arts_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = combat_arts_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = combat_arts_IV 
			}
			
			custom_tooltip = { text = combat_arts_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
#Weapon Arts Discipline

	purchase_weapon_arts_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ca_militia_barracks_1}
			
		allow = {
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_arts_I 
		}
		
		custom_tooltip = { text = weapon_arts_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5 
		}
	}
	
	upgrade_weapon_arts_I = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = weapon_arts_I 
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_arts_II 
		}
		
		custom_tooltip = { text = weapon_arts_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_weapon_arts_II = {
		is_high_prio = yes 
		
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = weapon_arts_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = weapon_arts_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_arts_III 
		}
		
		custom_tooltip = { text = weapon_arts_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_weapon_arts_III = {
		is_high_prio = yes 
		
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = weapon_arts_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = weapon_arts_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_arts_IV
		}
		
		custom_tooltip = { text = weapon_arts_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
#Melee Weapons

	purchase_axe_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool } 
			add_trait = axe_I 
		}
		
		custom_tooltip = { text = axe_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5 
		}
	}
	
	upgrade_axe_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = axe_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = axe_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = axe_I
			subtract_variable = { which = experience_cost which = experience_pool } 
			add_trait = axe_II 
		}
		
		custom_tooltip = { text = axe_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
		upgrade_axe_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = axe_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = axe_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = axe_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = axe_III
			}
			
			custom_tooltip = { text = axe_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_axe_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV 
				trait = axe_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV 
				trait = axe_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = axe_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = axe_IV 
			}
			
			custom_tooltip = { text = axe_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_mace_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = mace_I 
			}
			
			custom_tooltip = { text = mace_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_mace_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = mace_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = mace_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = mace_I
				subtract_variable = { which = experience_cost which = experience_pool } 
				add_trait = mace_II 
			} 
			
			custom_tooltip = { text = mace_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_mace_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = mace_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = mace_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = mace_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = mace_III 
			}
			
			custom_tooltip = { text = mace_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_mace_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = mace_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = mace_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = mace_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = mace_IV 
			}
			
			custom_tooltip = { text = mace_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_arming_sword_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = arming_sword_I
			}
			
			custom_tooltip = { text = arming_sword_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_arming_sword_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = arming_sword_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = arming_sword_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = arming_sword_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = arming_sword_II 
			}
			
			custom_tooltip = { text = arming_sword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_arming_sword_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = arming_sword_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = arming_sword_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = arming_sword_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = arming_sword_III 
			}
			
			custom_tooltip = { text = arming_sword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_arming_sword_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = arming_sword_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = arming_sword_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = arming_sword_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = arming_sword_IV 
			}
			
			custom_tooltip = { text = arming_sword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		purchase_dagger_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = dagger_I 
			}
			
			custom_tooltip = { text = dagger_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_dagger_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = dagger_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = dagger_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = dagger_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = dagger_II 
			}
			
			custom_tooltip = { text = dagger_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_dagger_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = dagger_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = dagger_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = dagger_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = dagger_III 
			}
			
			custom_tooltip = { text = dagger_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_dagger_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = dagger_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = dagger_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = dagger_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = dagger_IV 
			}
			
			custom_tooltip = { text = dagger_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_lance_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = lance_I 
			}
			
			custom_tooltip = { text = lance_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_lance_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = lance_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = lance_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = lance_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = lance_II 
			}
			
			custom_tooltip = { text = lance_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_lance_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = lance_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = lance_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = lance_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = lance_III 
			}
			
			custom_tooltip = { text = lance_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_lance_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = lance_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = lance_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = lance_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = lance_IV 
			}
			
			custom_tooltip = { text = lance_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_polearm_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = polearm_I
			}
			
			custom_tooltip = { text = polearm_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_polearm_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II 
				trait = polearm_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II 
				trait = polearm_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = polearm_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = polearm_II 
			}
			
			custom_tooltip = { text = polearm_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_polearm_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = polearm_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = polearm_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = polearm_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = polearm_III 
			}
			
			custom_tooltip = { text = polearm_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_polearm_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = polearm_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = polearm_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = polearm_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = polearm_IV
			}
			
			custom_tooltip = { text = polearm_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_rapier_main_gauche_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				year = 1300
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				year = 1300
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = rapier_main_gauche_I
			}
			
			custom_tooltip = { text = rapier_main_gauche_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_rapier_main_gauche_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = rapier_main_gauche_I
				year = 1300 
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = rapier_main_gauche_I
				year = 1300 
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = rapier_main_gauche_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = rapier_main_gauche_II
			}
			
			custom_tooltip = { text = rapier_main_gauche_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_rapier_main_gauche_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = rapier_main_gauche_II
				year = 1300
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = rapier_main_gauche_II
				year = 1300
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = rapier_main_gauche_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = rapier_main_gauche_III
			}
			
			custom_tooltip = { text = rapier_main_gauche_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_rapier_main_gauche_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = rapier_main_gauche_III
				year = 1300
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = rapier_main_gauche_III
				year = 1300
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = rapier_main_gauche_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = rapier_main_gauche_IV
			}
			
			custom_tooltip = { text = rapier_main_gauche_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		purchase_saber_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = saber_I 
			}
			
			custom_tooltip = { text = saber_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_saber_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = saber_I
				has_building = ca_militia_barracks_2
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			allow = {
				trait = weapon_arts_II
				trait = saber_I
				has_building = ca_militia_barracks_2
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			effect = {
				remove_trait = saber_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = saber_II 
			}
			
			custom_tooltip = { text = saber_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_saber_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = saber_II
				has_building = ca_militia_barracks_3
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			allow = {
				trait = weapon_arts_III
				trait = saber_II
				has_building = ca_militia_barracks_3
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			effect = {
				remove_trait = saber_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = saber_III 
			}
			
			custom_tooltip = { text = saber_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_saber_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = saber_III
				has_building = ca_militia_barracks_4
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = saber_III
				has_building = ca_militia_barracks_4
				
				OR = {
					culture_group = altaic
					culture_group = arabic 
					culture_group = east_slavic
					culture_group = iranian 
					culture = mizrahi 
					culture = bulgarian
				}
			}
			
			effect = {
				remove_trait = saber_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = saber_IV 
			}
			
			custom_tooltip = { text = saber_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_short_sword_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = short_sword_I 
			}
			
			custom_tooltip = { text = short_sword_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5
			}
		}
		
		upgrade_short_sword_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = short_sword_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = short_sword_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = short_sword_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = short_sword_II 
			}
			
			custom_tooltip = { text = short_sword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_short_sword_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = short_sword_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = short_sword_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = short_sword_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = short_sword_III 
			}
			
			custom_tooltip = { text = short_sword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_short_sword_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = short_sword_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = short_sword_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = short_sword_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = short_sword_IV
			}
			
			custom_tooltip = { text = short_sword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		purchase_spear_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = spear_I 
			}
			
			custom_tooltip = { text = spear_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5
			}
		}
		
		upgrade_spear_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = spear_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = spear_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = spear_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = spear_II 
			}
			
			custom_tooltip = { text = spear_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_spear_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = spear_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = spear_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = spear_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = spear_III 
			}
			
			custom_tooltip = { text = spear_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_spear_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = spear_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = spear_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = spear_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = spear_IV 
			}
			
			custom_tooltip = { text = spear_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		purchase_staff_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = staff_I 
			}
			
			custom_tooltip = { text = staff_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_staff_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = staff_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = staff_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = staff_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = staff_II 
			}
			
			custom_tooltip = { text = staff_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_staff_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = staff_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = staff_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = staff_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = staff_III 
			}
			
			custom_tooltip = { text = staff_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		upgrade_staff_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = staff_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = staff_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = staff_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = staff_IV
			}
			
			custom_tooltip = { text = staff_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1 
			}
		}
		
		purchase_battleaxe_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = battleaxe_I 
			}
			
			custom_tooltip = { text = battleaxe_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5
			}
		}
		
		upgrade_battleaxe_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = battleaxe_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = battleaxe_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = battleaxe_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = battleaxe_II 
			}
			
			custom_tooltip = { text = battleaxe_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_battleaxe_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = battleaxe_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = battleaxe_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = battleaxe_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = battleaxe_III 
			}
			
			custom_tooltip = { text = battleaxe_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_battleaxe_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = battleaxe_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = battleaxe_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = battleaxe_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = battleaxe_IV
			}
			
			custom_tooltip = { text = battleaxe_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		purchase_2h_mace_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = 2h_mace_I 
			}
			
			custom_tooltip = { text = 2h_mace_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5 
			}
		}
		
		upgrade_2h_mace_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = 2h_mace_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = 2h_mace_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = 2h_mace_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = 2h_mace_II 
			}
			
			custom_tooltip = { text = 2h_mace_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_2h_mace_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = 2h_mace_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = 2h_mace_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = 2h_mace_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = 2h_mace_III 
			}
			
			custom_tooltip = { text = 2h_mace_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_2h_mace_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = 2h_mace_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = 2h_mace_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = 2h_mace_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = 2h_mace_IV
			}
			
			custom_tooltip = { text = 2h_mace_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		purchase_longsword_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			allow = { 
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
			}
			
			effect = {
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = longsword_I 
			}
			
			custom_tooltip = { text = longsword_purchase }
			hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5
			}
		}
		
		upgrade_longsword_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 10 }
				trait = weapon_arts_II
				trait = longsword_I
				has_building = ca_militia_barracks_2
			}
			
			allow = {
				trait = weapon_arts_II
				trait = longsword_I
				has_building = ca_militia_barracks_2
			}
			
			effect = {
				remove_trait = longsword_I
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = longsword_II 
			}
			
			custom_tooltip = { text = longsword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_longsword_II = {
			potential = {
				is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = longsword_II
				has_building = ca_militia_barracks_3
			}
			
			allow = {
				trait = weapon_arts_III
				trait = longsword_II
				has_building = ca_militia_barracks_3
			}
			
			effect = {
				remove_trait = longsword_II
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = longsword_III 
			}
			
			custom_tooltip = { text = longsword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
		upgrade_longsword_III = {
			potential = {
				is_variable_equal = { which = experience_pool value = 30 }
				trait = weapon_arts_IV
				trait = longsword_III
				has_building = ca_militia_barracks_4
			}
			
			allow = {
				trait = weapon_arts_IV
				trait = longsword_III
				has_building = ca_militia_barracks_4
			}
			
			effect = {
				remove_trait = longsword_III
				subtract_variable = { which = experience_cost which = experience_pool }
				add_trait = longsword_IV
			}
			
			custom_tooltip = { text = longsword_upgrade }
			hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
#Ranged Weapons

	purchase_horse_bow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = horse_bow_I 
		}
		
		custom_tooltip = { text = horse_bow_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
			ai_will_do = {
				factor = 0.5
			}
		}
		
	upgrade_horse_bow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = horse_bow_I
			has_building = ca_militia_barracks_2
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		allow = {
			trait = weapon_arts_II
			trait = horse_bow_I
			has_building = ca_militia_barracks_2
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		effect = {
			remove_trait = horse_bow_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = horse_bow_II
		}
		
		custom_tooltip = { text = horse_bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
	upgrade_horse_bow_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = horse_bow_II
			has_building = ca_militia_barracks_3
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		allow = {
			trait = weapon_arts_III
			trait = horse_bow_II
			has_building = ca_militia_barracks_3
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		effect = {
			remove_trait = horse_bow_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = horse_bow_III
		}
		
		custom_tooltip = { text = horse_bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
		
	upgrade_horse_bow_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = horse_bow_III
			has_building = ca_militia_barracks_4
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = horse_bow_III
			has_building = ca_militia_barracks_4
			
			OR = {
				culture = turkish
				culture = mongolian
			}
		}
		
		effect = {
			remove_trait = horse_bow_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = horse_bow_IV
		}
		
		custom_tooltip = { text = horse_bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
			ai_will_do = {
				factor = 1
			}
		}
	
	purchase_long_bow_I = {
			potential = {
				is_variable_equal = { which = experience_pool value = 5 }
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
				
				OR = {
					culture = welsh
					culture = english
				}
			}
			
			allow = {
				trait = weapon_arts_I
				has_building = ca_militia_barracks_1
				
				OR = {
					culture = welsh
					culture = english
				}
			}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = long_bow_I 
		}
		
		custom_tooltip = { text = long_bow_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
			
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_long_bow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = long_bow_I
			has_building = ca_militia_barracks_2
				
			OR = {
				culture = welsh
				culture = english
			}
		}
		
		allow = {
			trait = weapon_arts_II
			trait = long_bow_I
			has_building = ca_militia_barracks_2
				
			OR = {
				culture = welsh
				culture = english
			}
		}
		
		effect = {
			remove_trait = long_bow_I 
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = long_bow_I 
		}
		
		custom_tooltip = { text = long_bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
		ai_will_do = {
			factor = 1
		}
	}
	upgrade_long_bow_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
				trait = weapon_arts_III
				trait = long_bow_II
				has_building = ca_militia_barracks_3
				
			OR = {
				culture = welsh
				culture = english
			}
		}
		
		allow = {
			potential = {
				trait = weapon_arts_III
				trait = long_bow_II
				has_building = ca_militia_barracks_3
				
			OR = {
				culture = welsh
				culture = english
			}
		}
		
		effect = {
			remove_trait = long_bow_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = long_bow_III
		}
		
		custom_tooltip = { text = long_bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_long_bow_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = long_bow_III
			has_building = ca_militia_barracks_4
				
			OR = {
				culture = welsh
				culture = english
			}
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = long_bow_III
			has_building = ca_militia_barracks_4
				
			OR = {
				culture = welsh
				culture = english
			}
			}
		
		effect = {
			remove_trait = long_bow_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = long_bow_IV
		}
		
		custom_tooltip = { text = long_bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
			
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_bow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = bow_I 
		}
		
		custom_tooltip = { text = bow_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5 
		}
	}
	
	upgrade_bow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = bow_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = bow_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = bow_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = bow_II 
		}
		
		custom_tooltip = { text = bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_bow_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = bow_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = bow_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = bow_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = bow_III
		}
		
		custom_tooltip = { text = bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_bow_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = bow_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = bow_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = bow_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = bow_IV
		}
		
		custom_tooltip = { text = bow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	purchase_crossbow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = crossbow_I
		}
		
		custom_tooltip = { text = crossbow_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5 
		}
	}
	
	upgrade_crossbow_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = crossbow_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = crossbow_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = crossbow_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = crossbow_II 
		}
		
		custom_tooltip = { text = crossbow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_crossbow_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = crossbow_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = crossbow_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = crossbow_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = crossbow_III 
		}
		
		custom_tooltip = { text = crossbow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_crossbow_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = crossbow_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = crossbow_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = crossbow_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = crossbow_IV
		}
		
		custom_tooltip = { text = crossbow_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
#Shields

	purchase_knights_shield_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knights_shield_I 
		}
		
		custom_tooltip = { text = knights_shield_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_knights_shield_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = knights_shield_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = knights_shield_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = knights_shield_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knights_shield_II 
		}
		
		custom_tooltip = { text = knights_shield_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_knights_shield_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = knights_shield_II
			has_building = ca_militia_barracks_3
		}
		
		allow  = {
			trait = weapon_arts_III
			trait = knights_shield_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = knights_shield_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knights_shield_III 
		}
		
		custom_tooltip = { text = knights_shield_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_knights_shield_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = knights_shield_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = knights_shield_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = knights_shield_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knights_shield_IV
		}
		
		custom_tooltip = { text = knights_shield_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_round_shield_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = round_shield_I
		}
		
		custom_tooltip = { text = round_shield_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5 
		}
	}
	
	upgrade_round_shield_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = round_shield_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = round_shield_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = round_shield_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = round_shield_II 
		}
		
		custom_tooltip = { text = round_shield_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_round_shield_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = round_shield_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = round_shield_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = round_shield_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = round_shield_III
		}
		
		custom_tooltip = { text = round_shield_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	upgrade_round_shield_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = round_shield_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = round_shield_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = round_shield_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = round_shield_IV
		}
		
		custom_tooltip = { text = round_shield_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1 
		}
	}
	
	purchase_buckler_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = buckler_I
		}
		
		custom_tooltip = { text = buckler_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_buckler_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = buckler_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = buckler_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = buckler_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = buckler_II 
		}
		
		custom_tooltip = { text = buckler_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_buckler_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = buckler_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = buckler_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = buckler_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = buckler_III
		}
		
		custom_tooltip = { text = buckler_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_buckler_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = buckler_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = buckler_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = buckler_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = buckler_IV
		}
		
		custom_tooltip = { text = buckler_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_targe_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = targe_I 
		}
		
		custom_tooltip = { text = targe_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_targe_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = targe_I
			has_building = ca_militia_barracks_2
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		allow = {
			trait = weapon_arts_II
			trait = targe_I
			has_building = ca_militia_barracks_2
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		effect = {
			remove_trait = targe_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = targe_II
		}
		
		custom_tooltip = { text = targe_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_targe_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = targe_II
			has_building = ca_militia_barracks_3
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		allow = {
			trait = weapon_arts_III
			trait = targe_II
			has_building = ca_militia_barracks_3
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		effect = {
			remove_trait = targe_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = targe_III
		}
		
		custom_tooltip = { text = targe_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_targe_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = targe_III
			has_building = ca_militia_barracks_4
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = targe_III
			has_building = ca_militia_barracks_4
			
			OR = {
				culture = scottish
				culture = frankish
				culture = norse
			}
		}
		
		effect = {
			remove_trait = targe_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = targe_IV
		}
		
		custom_tooltip = { text = targe_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_scutum_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			culture = roman
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			culture = roman
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scutum_I 
		}
		
		custom_tooltip = { text = scutum_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_scutum_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = scutum_I
			culture = roman
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = scutum_I
			culture = roman
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = scutum_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scutum_II 
		}
		
		custom_tooltip = { text = scutum_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_scutum_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = scutum_II
			culture = roman
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = scutum_II
			culture = roman
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = scutum_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scutum_III
		}
		
		custom_tooltip = { text = scutum_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_scutum_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = scutum_III
			culture = roman
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = scutum_III
			culture = roman
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = scutum_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scutum_IV
		}
		
		custom_tooltip = { text = scutum_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_aspis_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			culture = greek
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			culture = greek
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = aspis_I 
		}
		
		custom_tooltip = { text = aspis_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_aspis_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = aspis_I
			culture = greek
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = aspis_I
			culture = greek
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = aspis_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = aspis_II 
		}
		
		custom_tooltip = { text = aspis_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_aspis_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = aspis_II
			culture = greek
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = aspis_II
			culture = greek
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = aspis_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = aspis_III
		}
		
		custom_tooltip = { text = aspis_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_aspis_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = aspis_III
			culture = greek
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = aspis_III
			culture = greek
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = aspis_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = aspis_IV
		}
		
		custom_tooltip = { text = aspis_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
#Armour

	purchase_cloth_armour_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = cloth_armour_I 
		}
		
		custom_tooltip = { text = cloth_armour_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_cloth_armour_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = cloth_armour_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = cloth_armour_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = cloth_armour_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = cloth_armour_II 
		}
		
		custom_tooltip = { text = cloth_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_cloth_armour_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = cloth_armour_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = cloth_armour_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = cloth_armour_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = cloth_armour_III
		}
		
		custom_tooltip = { text = cloth_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_cloth_armour_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = cloth_armour_III 
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = cloth_armour_III 
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = cloth_armour_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = cloth_armour_IV
		}
		
		custom_tooltip = { text = cloth_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_leather_armour_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leather_armour_I 
		}
		
		custom_tooltip = { text = leather_armour_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_leather_armour_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = leather_armour_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = leather_armour_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = leather_armour_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leather_armour_II 
		}
		
		custom_tooltip = { text = leather_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_leather_armour_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = leather_armour_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = leather_armour_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = leather_armour_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leather_armour_III
		}
		
		custom_tooltip = { text = leather_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_leather_armour_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = leather_armour_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = leather_armour_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = leather_armour_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leather_armour_IV
		}
		
		custom_tooltip = { text = leather_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_mail_armour_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mail_armour_I
		}
		
		custom_tooltip = { text = mail_armour_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_mail_armour_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = mail_armour_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = mail_armour_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = mail_armour_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mail_armour_II 
		}
		
		custom_tooltip = { text = mail_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_mail_armour_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = mail_armour_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = mail_armour_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = mail_armour_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mail_armour_III
		}
		
		custom_tooltip = { text = mail_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_mail_armour_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = mail_armour_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = mail_armour_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = mail_armour_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mail_armour_IV
		}
		
		custom_tooltip = { text = mail_armour_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	purchase_halfplate_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			year = 1200
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			year = 1200
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = halfplate_I 
		}
		
		custom_tooltip = { text = halfplate_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_halfplate_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = halfplate_I
			year = 1200
			has_building =ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = halfplate_I
			year = 1200
			has_building =ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = halfplate_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = halfplate_II
		}
		
		custom_tooltip = { text = halfplate_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_halfplate_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = halfplate_II
			year = 1200
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = halfplate_II
			year = 1200
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = halfplate_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = halfplate_III
		}
		
		custom_tooltip = { text = halfplate_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_halfplate_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = halfplate_III
			year = 1200
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = halfplate_III
			year = 1200
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = halfplate_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = halfplate_IV
		}
		
		custom_tooltip = { text = halfplate_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_fullplate_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			year = 1350
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			year = 1350
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fullplate_I 
		}
		
		custom_tooltip = { text = fullplate_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fullplate_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = fullplate_I
			year = 1350
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = fullplate_I
			year = 1350
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = fullplate_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fullplate_II 
		}
		
		custom_tooltip = { text = fullplate_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_fullplate_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = fullplate_II
			year = 1350
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = fullplate_II
			year = 1350
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = fullplate_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fullplate_III
		}
		
		custom_tooltip = { text = fullplate_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
	upgrade_fullplate_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = fullplate_III
			year = 1350
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = fullplate_III
			year = 1350
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = fullplate_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fullplate_IV
		}
		
		custom_tooltip = { text = fullplate_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 1
		}
	}
	
#Weapon Arts Skill

	purchase_fast_draw_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		allow = {
			trait = weapon_arts_I
			has_building = ca_militia_barracks_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_draw_I
		}
		
		custom_tooltip = { text = fast_draw_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.25 
		}
	}
	
	upgrade_fast_draw_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_arts_II
			trait = fast_draw_I
			has_building = ca_militia_barracks_2
		}
		
		allow = {
			trait = weapon_arts_II
			trait = fast_draw_I
			has_building = ca_militia_barracks_2
		}
		
		effect = {
			remove_trait = fast_draw_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_draw_II 
		}
		
		custom_tooltip = { text = fast_draw_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.25 
		}
	}
	
	upgrade_fast_draw_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_arts_III
			trait = fast_draw_II
			has_building = ca_militia_barracks_3
		}
		
		allow = {
			trait = weapon_arts_III
			trait = fast_draw_II
			has_building = ca_militia_barracks_3
		}
		
		effect = {
			remove_trait = fast_draw_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_draw_III
		}
		
		custom_tooltip = { text = fast_draw_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.25 
		}
	}
	
	upgrade_fast_draw_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_arts_IV
			trait = fast_draw_III
			has_building = ca_militia_barracks_4
		}
		
		allow = {
			trait = weapon_arts_IV
			trait = fast_draw_III
			has_building = ca_militia_barracks_4
		}
		
		effect = {
			remove_trait = fast_draw_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_draw_IV
		}
		
		custom_tooltip = { text = fast_draw_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.25 
		}
	}
	
#Military Discipline

	purchase_military_I = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			has_building = ca_generals_retinue_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_I 
		}
		
		custom_tooltip = { text = military_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_military_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_I
			has_building = has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_I
			has_building = has_building = ca_generals_retinue_2
		}
		
		effect = {
			remove_trait = military_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_II 
		}
		
		custom_tooltip = { text = military_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_military_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = military_II
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_II
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = military_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_III
		}
		
		custom_tooltip = { text = military_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_military_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = military_III
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_III
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = military_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_IV
		}
		
		custom_tooltip = { text = military_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Military Traits

	purchase_armoury_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = armoury_I 
		}
		
		custom_tooltip = { text = armoury_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_armoury_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = military_II
			trait = armoury_I
			has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_II
			trait = armoury_I
			has_building = ca_generals_retinue_2
		}
		
		effect = {
			remove_trait = armoury_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = armoury_II 
		}
		
		custom_tooltip = { text = armoury_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_armoury_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_III
			trait = armoury_II
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_III
			trait = armoury_II
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = armoury_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = armoury_III
		}
		
		custom_tooltip = { text = armoury_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_armoury_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = military_IV
			trait = armoury_III
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_IV
			trait = armoury_III
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = armoury_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = armoury_IV
		}
		
		custom_tooltip = { text = armoury_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_ambush_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = ambush_I
		}
		
		custom_tooltip = { text = ambush_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_ambush_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = military_II
			trait = ambush_I
			has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_II
			trait = ambush_I
			has_building = ca_generals_retinue_2
		}
		
		effect = {
			remove_trait = ambush_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = ambush_II 
		}
		
		custom_tooltip = { text = ambush_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_ambush_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_III
			trait = ambush_II
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_III
			trait = ambush_II
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = ambush_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = ambush_III 
		}
		
		custom_tooltip = { text = ambush_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_ambush_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = military_IV
			trait = ambush_III
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_IV
			trait = ambush_III
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = ambush_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = ambush_IV
		}
		
		custom_tooltip = { text = ambush_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_military_tactics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_tactics_I
		}
		
		custom_tooltip = { text = military_tactics_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_military_tactics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = military_II 
			trait = military_tactics_I
			has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_II 
			trait = military_tactics_I
			has_building = ca_generals_retinue_2
		}
		
		effect = {
			remove_trait = military_tactics_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_tactics_II
		}
		
		custom_tooltip = { text = military_tactics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_military_tactics_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_III 
			trait = military_tactics_II
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_III 
			trait = military_tactics_II
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = military_tactics_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_tactics_III
		}
		
		custom_tooltip = { text = military_tactics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_military_tactics_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = military_IV 
			trait = military_tactics_III
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_IV 
			trait = military_tactics_III
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = military_tactics_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = military_tactics_IV
		}
		
		custom_tooltip = { text = military_tactics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_leadership_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leadership_I
		}
		
		custom_tooltip = { text = leadership_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_leadership_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = military_II
			trait = leadership_I
			has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_II
			trait = leadership_I
			has_building = ca_generals_retinue_2
		}
		
		effect = {
			remove_trait = leadership_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leadership_II 
		}
		
		custom_tooltip = { text = leadership_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
		
	upgrade_leadership_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_III
			trait = leadership_II
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_III
			trait = leadership_II
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = leadership_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leadership_III
		}
		
		custom_tooltip = { text = leadership_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_leadership_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = military_IV
			trait = leadership_III
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_IV
			trait = leadership_III
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = leadership_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = leadership_IV
		}
		
		custom_tooltip = { text = leadership_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
		
	purchase_siege_engines_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			trait = military_I
			has_building = ca_generals_retinue_1
		}
			
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engines_I 
		}
			
		custom_tooltip = { text = siege_engines_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_siege_engines_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = military_II
			trait = siege_engines_I
			has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_II
			trait = siege_engines_I
			has_building = ca_generals_retinue_2
		}
		
		effect = {
			remove_trait = siege_engines_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engines_II
		}
			
		custom_tooltip = { text = siege_engines_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_siege_engines_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_III
			trait = siege_engines_II
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_III
			trait = siege_engines_II
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = siege_engines_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engines_III
		}
			
		custom_tooltip = { text = siege_engines_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_siege_engines_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = military_IV
			trait = siege_engines_III
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_IV
			trait = siege_engines_III
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = siege_engines_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engines_IV
		}
			
		custom_tooltip = { text = siege_engines_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_misguided_warrior = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		allow = {
			trait = military_I
			has_building = ca_generals_retinue_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = misguided_warrior
		}
		
		custom_tooltip = { text = misguided_warrior_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_misguided_warrior = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = military_II
			trait = misguided_warrior
			has_building = ca_generals_retinue_2
		}
		
		allow = {
			trait = military_II
			trait = misguided_warrior
			has_building = ca_generals_retinue_2
		}
		
		effect = { 
			remove_trait = misguided_warrior
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = tough_soldier
		}
		
		custom_tooltip = { text = misguided_warrior_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_tough_soldier = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = military_III
			trait = tough_soldier
			has_building = ca_generals_retinue_3
		}
		
		allow = {
			trait = military_III
			trait = tough_soldier
			has_building = ca_generals_retinue_3
		}
		
		effect = {
			remove_trait = tough_soldier
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = skilled_tactician
		}
		
		custom_tooltip = { text = misguided_warrior_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_skilled_tactician = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = military_IV
			trait = skilled_tactician
			has_building = ca_generals_retinue_4
		}
		
		allow = {
			trait = military_IV
			trait = skilled_tactician
			has_building = ca_generals_retinue_4
		}
		
		effect = {
			remove_trait = skilled_tactician
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = brilliant_strategist
		}
		
		custom_tooltip = { text = misguided_warrior_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}

#Diplomacy Stat
#Emissaries Discipline

	purchase_business_diplomacy_I = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ca_emissary_1
		}
		
		allow = {
			has_building = ca_emissary_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_diplomacy_I 
		}
		
		custom_tooltip = { text = business_diplomacy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_business_diplomacy_I = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait business_diplomacy_I
			has_building = ca_emissary_2
		}
		
		allow = {
			trait business_diplomacy_I
			has_building = ca_emissary_2
		}
		
		effect = {
			remove_trait = business_diplomacy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_diplomacy_II
		}
		
		custom_tooltip = { text = business_diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_business_diplomacy_II = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait business_diplomacy_II
			has_building = ca_emissary_3
		}
		
		allow = {
			trait business_diplomacy_II
			has_building = ca_emissary_3
		}
		
		effect = {
			remove_trait = business_diplomacy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_diplomacy_III
		}
		
		custom_tooltip = { text = business_diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_business_diplomacy_III = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait business_diplomacy_III
			has_building = ca_emissary_4
		}
		
		allow = {
			trait business_diplomacy_III
			has_building = ca_emissary_4
		}
		
		effect = {
			remove_trait = business_diplomacy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_diplomacy_IV
		}
		
		custom_tooltip = { text = business_diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Emissaries Traits
	
	purchase_diplomacy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_diplomacy_I
			has_building = ca_emissary_1 
		}
		
		allow = {
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = diplomacy_I 
		}
		
		custom_tooltip = { text = diplomacy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_diplomacy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_diplomacy_II
			trait = diplomacy_I
			has_building = ca_emissary_2
		}
		
		allow = {
			trait = business_diplomacy_II
			trait = diplomacy_I
			has_building = ca_emissary_2
		}
		
		effect = {
			remove_trait = diplomacy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = diplomacy_II 
		}
		
		custom_tooltip = { text = diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_diplomacy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_diplomacy_III
			trait = diplomacy_II
			has_building = ca_emissary_3
		}
		
		allow = {
			trait = business_diplomacy_III
			trait = diplomacy_II
			has_building = ca_emissary_3
		}
		
		effect = {
			remove_trait = diplomacy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = diplomacy_III
		}
		
		custom_tooltip = { text = diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_diplomacy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_diplomacy_IV
			trait = diplomacy_III
			has_building = ca_emissary_4
		}
		
		allow = {
			trait = business_diplomacy_IV
			trait = diplomacy_III
			has_building = ca_emissary_4
		}
		
		effect = {
			remove_trait = diplomacy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = diplomacy_IV
		}
		
		custom_tooltip = { text = diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_law_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		allow = {
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = law_I 
		}
		
		custom_tooltip = { text = law_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_law_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_diplomacy_II
			trait = law_I
			has_building = ca_emissary_2
		}
		
		allow = {
			trait = business_diplomacy_II
			trait = law_I
			has_building = ca_emissary_2
		}
		
		effect = {
			remove_trait = law_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = law_II 
		}
		
		custom_tooltip = { text = law_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_law_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_diplomacy_III
			trait = law_II
			has_building = ca_emissary_3
		}
		
		allow = {
			trait = business_diplomacy_III
			trait = law_II
			has_building = ca_emissary_3
		}
		
		effect = {
			remove_trait = law_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = law_III
		}
		
		custom_tooltip = { text = law_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_law_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_diplomacy_IV
			trait = law_III 
			has_building = ca_emissary_4
		}
		
		allow = {
			trait = business_diplomacy_IV
			trait = law_III
			has_building = ca_emissary_4
		}
		
		effect = {
			remove_trait = law_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = law_IV
		}
		
		custom_tooltip = { text = law_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_politics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		allow = {
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = politics_I
		}
		
		custom_tooltip = { text = politics_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_politics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_diplomacy_II
			trait = politics_I
			has_building = ca_emissary_2
		}
		
		allow = {
			trait = business_diplomacy_II
			trait = politics_I
			has_building = ca_emissary_2
		}
		
		effect = {
			remove_trait = politics_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = politics_II 
		}
		
		custom_tooltip = { text = politics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_politics_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_diplomacy_III
			trait = politics_II
			has_building = ca_emissary_3
		}
		
		allow = {
			trait = business_diplomacy_III
			trait = politics_II
			has_building = ca_emissary_3
		}
		
		effect = {
			remove_trait = politics_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = politics_III
		}
		
		custom_tooltip = { text = politics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_politics_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_diplomacy_IV
			trait = politics_III
			has_building = ca_emissary_4
		}
		
		allow = {
			trait = business_diplomacy_IV
			trait = politics_III
			has_building = ca_emissary_4
		}
		
		effect = {
			remove_trait = politics_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = politics_IV
		}
		
		custom_tooltip = { text = politics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_propaganda_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		allow = {
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = propaganda_I
		}
		
		custom_tooltip = { text = propaganda_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_propaganda_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_diplomacy_II
			trait = propaganda_I
			has_building = ca_emissary_2
		}
		
		allow = {
			trait = business_diplomacy_II
			trait = propaganda_I
			has_building = ca_emissary_2
		}
		
		effect = {
			remove_trait = propaganda_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = propaganda_II 
		}
		
		custom_tooltip = { text = propaganda_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_propaganda_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_diplomacy_III
			trait = propaganda_II
			has_building = ca_emissary_3
		}
		
		allow = {
			trait = business_diplomacy_III
			trait = propaganda_II
			has_building = ca_emissary_3
		}
		
		effect = {
			remove_trait = propaganda_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = propaganda_III
		}
		
		custom_tooltip = { text = propaganda_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_propaganda_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_diplomacy_IV
			trait = propaganda_III
			has_building = ca_emissary_4
		}
		
		allow = {
			trait = business_diplomacy_IV
			trait = propaganda_III
			has_building = ca_emissary_4
		}
		
		effect = {
			remove_trait = propaganda_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = propaganda_IV
		}
		
		custom_tooltip = { text = propaganda_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_naive_appeaser = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		allow = {
			trait = business_diplomacy_I
			has_building = ca_emissary_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = naive_appeaser 
		}
		
		custom_tooltip = { text = naive_appeaser_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_naive_appeaser = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait business_diplomacy_II
			trait = naive_appeaser
			has_building = ca_emissary_2
		}
		
		allow = {
			trait business_diplomacy_II
			trait = naive_appeaser
			has_building = ca_emissary_2
		}
		
		effect = {
			remove_trait = naive_appeaser
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = underhanded_rogue
		}
		
		custom_tooltip = { text = naive_appeaser_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_underhanded_rogue = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_diplomacy_III
			trait = underhanded_rogue
			has_building = ca_emissary_3
		}
		
		allow = {
			trait = business_diplomacy_III
			trait = underhanded_rogue
			has_building = ca_emissary_3
		}
		
		effect = {
			remove_trait = underhanded_rogue
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = charismatic_negotiator
		}
		
		custom_tooltip = { text = naive_appeaser_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_charismatic_negotiator = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_diplomacy_IV
			trait = charismatic_negotiator
			has_building = ca_emissary_4
		}
		
		allow = {
			trait = business_diplomacy_IV
			trait = charismatic_negotiator
			has_building = ca_emissary_4
		}
		
		effect = {
			remove_trait = charismatic_negotiator
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = grey_eminence
		}
		
		custom_tooltip = { text = naive_appeaser_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Emissariate Discipline

	purchase_scholarly_diplomacy_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ca_emissariate_1
		}
		
		allow = {
			has_building = ca_emissariate_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scholarly_diplomacy_I
		}
		
		custom_tooltip = { text = scholarly_diplomacy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_scholarly_diplomacy_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = scholarly_diplomacy_I
			has_building = ca_emissariate_2 
		}
		
		allow = {
			trait = scholarly_diplomacy_I
			has_building = ca_emissariate_2
		}
		
		effect = {
			remove_trait = scholarly_diplomacy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scholarly_diplomacy_II 
		}
		
		custom_tooltip = { text = scholarly_diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_scholarly_diplomacy_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = scholarly_diplomacy_II
			has_building = ca_emissariate_3
		}
		
		allow = {
			trait = scholarly_diplomacy_II
			has_building = ca_emissariate_3
		}
		
		effect = {
			remove_trait = scholarly_diplomacy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scholarly_diplomacy_III
		}
		
		custom_tooltip = { text = scholarly_diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_scholarly_diplomacy_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = scholarly_diplomacy_III
			has_building = ca_emissariate_4
		}
		
		allow = {
			trait = scholarly_diplomacy_III
			has_building = ca_emissariate_4
		}
		
		effect = {
			remove_trait = scholarly_diplomacy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scholarly_diplomacy_IV
		}
		
		custom_tooltip = { text = scholarly_diplomacy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Emissariate Traits

	purchase_public_speaking_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = scholarly_diplomacy_I
			has_building = ca_emissariate_1
		}
		
		allow = {
			trait = scholarly_diplomacy_I
			has_building = ca_emissariate_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = public_speaking_I
		}
		
		custom_tooltip = { text = public_speaking_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_public_speaking_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = scholarly_diplomacy_II
			trait = public_speaking_I
			has_building = ca_emissariate_2
		}
		
		allow = {
			trait = scholarly_diplomacy_II
			trait = public_speaking_I
			has_building = ca_emissariate_2
		}
		
		effect = {
			remove_trait = public_speaking_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = public_speaking_II 
		}
		
		custom_tooltip = { text = public_speaking_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_public_speaking_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = scholarly_diplomacy_III
			trait = public_speaking_II
			has_building = ca_emissariate_3
		}
		
		allow = {
			trait = scholarly_diplomacy_III
			trait = public_speaking_II
			has_building = ca_emissariate_3
		}
		
		effect = {
			remove_trait = public_speaking_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = public_speaking_III
		}
		
		custom_tooltip = { text = public_speaking_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_public_speaking_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = scholarly_diplomacy_IV
			trait = public_speaking_III
			has_building = ca_emissariate_4
		}
		
		allow = {
			trait = scholarly_diplomacy_IV
			trait = public_speaking_III
			has_building = ca_emissariate_4
		}
		
		effect = {
			remove_trait = public_speaking_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = public_speaking_IV
		}
		
		custom_tooltip = { text = public_speaking_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Stewardship Discipline

	purchase_business_stewardship_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_stewardship_I
		}
		
		custom_tooltip = { text = business_stewardship_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_business_stewardship_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_stewardship_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = business_stewardship_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = business_stewardship_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_stewardship_II
		}
		
		custom_tooltip = { text = business_stewardship_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_business_stewardship_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = business_stewardship_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = business_stewardship_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = business_stewardship_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_stewardship_III
		}
		
		custom_tooltip = { text = business_stewardship_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_business_stewardship_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = business_stewardship_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = business_stewardship_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = business_stewardship_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = business_stewardship_IV
		}
		
		custom_tooltip = { text = business_stewardship_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Stewardship Traits

	purchase_accounting_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = accounting_I
		}
		
		custom_tooltip = { text = accounting_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_accounting_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_stewardship_II
			trait = accounting_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = business_stewardship_II
			trait = accounting_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = accounting_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = accounting_II
		}
		
		custom_tooltip = { text = accounting_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_accounting_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_stewardship_III
			trait = accounting_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = business_stewardship_III
			trait = accounting_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = accounting_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = accounting_III
		}
		
		custom_tooltip = { text = accounting_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_accounting_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_stewardship_IV
			trait = accounting_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = business_stewardship_IV
			trait = accounting_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = accounting_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = accounting_IV
		}
		
		custom_tooltip = { text = accounting_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_administration_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = administration_I 
		}
		
		custom_tooltip = { text = administration_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_administration_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_stewardship_II
			trait = administration_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = business_stewardship_II
			trait = administration_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = administration_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = administration_II 
		}
		
		custom_tooltip = { text = administration_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_administration_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_stewardship_III
			trait = administration_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = business_stewardship_III
			trait = administration_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = administration_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = administration_III
		}
		
		custom_tooltip = { text = administration_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_administration_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_stewardship_IV
			trait = administration_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = business_stewardship_IV
			trait = administration_III
			has_building = ct_university_V
		}
		
		effect = {
			remove_trait = administration_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = administration_IV
		}
		
		custom_tooltip = { text = administration_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_economics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = economics_I 
		}
		
		custom_tooltip = { text = economics_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_economics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_stewardship_II
			trait = economics_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = business_stewardship_II
			trait = economics_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = economics_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = economics_II
		}
		
		custom_tooltip = { text = economics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_economics_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_stewardship_III
			trait = economics_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = business_stewardship_III
			trait = economics_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = economics_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = economics_III
		}
		
		custom_tooltip = { text = economics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_economics_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_stewardship_IV
			trait = economics_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = business_stewardship_IV
			trait = economics_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = economics_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = economics_IV
		}
		
		custom_tooltip = { text = economics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_finance_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = finance_I 
		}
		
		custom_tooltip = { text = finance_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_finance_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_stewardship_II
			trait = finance_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = business_stewardship_II
			trait = finance_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = finance_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = finance_II
		}
		
		custom_tooltip = { text = finance_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_finance_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_stewardship_III
			trait = finance_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = business_stewardship_III
			trait = finance_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = finance_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = finance_III
		}
		
		custom_tooltip = { text = finance_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_finance_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_stewardship_IV
			trait = finance_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = business_stewardship_IV
			trait = finance_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = finance_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = finance_IV
		}
		
		custom_tooltip = { text = finance_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_indulgent_wastrel = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = business_stewardship_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = indulgent_wastrel 
		}
		
		custom_tooltip = { text = indulgent_wastrel_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_indulgent_wastrel = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = business_stewardship_II
			trait = indulgent_wastrel
			has_building = ct_university_2
		}
		
		allow = {
			trait = business_stewardship_II
			trait = indulgent_wastrel
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = indulgent_wastrel
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = thrifty_clerk 
		}
		
		custom_tooltip = { text = indulgent_wastrel_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_thrifty_clerk = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = business_stewardship_III
			trait = thrifty_clerk
			has_building = ct_university_3
		}
		
		allow = {
			trait = business_stewardship_III
			trait = thrifty_clerk
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = thrifty_clerk
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fortune_builder 
		}
		
		custom_tooltip = { text = indulgent_wastrel_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fortune_builder = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = business_stewardship_IV
			trait = fortune_builder
			has_building = ct_university_4
		}
		
		allow = {
			trait = business_stewardship_IV
			trait = fortune_builder
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = fortune_builder
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = midas_touched 
		}
		
		custom_tooltip = { text = indulgent_wastrel_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Stewardship Discipline

	purchase_knowledge_I = {
		is_high_prio = yes
		
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knowledge_I
		}
		
		custom_tooltip = { text = knowledge_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_knowledge_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = knowledge_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knowledge_II
		}
		
		custom_tooltip = { text = knowledge_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_knowledge_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = knowledge_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = knowledge_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = knowledge_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knowledge_III
		}
		
		custom_tooltip = { text = knowledge_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_knowledge_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = knowledge_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = knowledge_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = knowledge_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = knowledge_IV
		}
		
		custom_tooltip = { text = knowledge_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Stewardship Knowledge Traits
		
	purchase_artist_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = artist_I
		}
		
		custom_tooltip = { text = artist_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_artist_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = artist_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = artist_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = artist_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = artist_II
		}
		
		custom_tooltip = { text = artist_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_artist_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = artist_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = artist_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = artist_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = artist_III
		}
		
		custom_tooltip = { text = artist_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_artist_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = artist_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = artist_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = artist_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = artist_IV
		}
		
		custom_tooltip = { text = artist_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_dancing_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = dancing_I
		}
		
		custom_tooltip = { text = dancing_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	
	purchase_connoisseur_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = connoisseur_I
		}
		
		custom_tooltip = { text = connoisseur_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_connoisseur_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = connoisseur_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = knowledge_II
			trait = connoisseur_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = connoisseur_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = connoisseur_II
		}
		
		custom_tooltip = { text = connoisseur_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_connoisseur_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = connoisseur_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = knowledge_III
			trait = connoisseur_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = connoisseur_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = connoisseur_III
		}
		
		custom_tooltip = { text = connoisseur_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_connoisseur_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = connoisseur_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = connoisseur_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = connoisseur_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = connoisseur_IV
		}
		
		custom_tooltip = { text = connoisseur_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_dancing_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = dancing_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = dancing_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = dancing_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = dancing_II
		}
		
		custom_tooltip = { text = dancing_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_dancing_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = dancing_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = dancing_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = dancing_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = dancing_III
		}
		
		custom_tooltip = { text = dancing_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_dancing_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = dancing_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = dancing_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = dancing_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = dancing_IV
		}
		
		custom_tooltip = { text = dancing_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_fire_eating_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fire_eating_I
		}
		
		custom_tooltip = { text = fire_eating_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fire_eating_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = fire_eating_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = fire_eating_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = fire_eating_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fire_eating_II
		}
		
		custom_tooltip = { text = fire_eating_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fire_eating_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = fire_eating_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = fire_eating_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = fire_eating_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fire_eating_III
		}
		
		custom_tooltip = { text = fire_eating_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fire_eating_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = fire_eating_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = fire_eating_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = fire_eating_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fire_eating_IV
		}
		
		custom_tooltip = { text = fire_eating_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_musician_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = musician_I
		}
		
		custom_tooltip = { text = musician_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_musician_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = musician_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = musician_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = musician_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = musician_II
		}
		
		custom_tooltip = { text = musician_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_musician_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = musician_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = musician_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = musician_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = musician_III
		}
		
		custom_tooltip = { text = musician_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_musician_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = musician_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = musician_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = musician_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = musician_IV
		}
		
		custom_tooltip = { text = musician_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_poet_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poet_I
		}
		
		custom_tooltip = { text = poet_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poet_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = poet_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = poet_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = poet_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poet_II
		}
		
		custom_tooltip = { text = poet_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poet_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = poet_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = poet_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = poet_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poet_III
		}
		
		custom_tooltip = { text = poet_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poet_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = poet_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = poet_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = poet_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poet_IV
		}
		
		custom_tooltip = { text = poet_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_singer_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = singer_I
		}
		
		custom_tooltip = { text = singer_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_savoir_faire_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = savoir_faire_I 
		}
		
		custom_tooltip = { text = savoir_faire_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_savoir_faire_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = savoir_faire_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = knowledge_II
			trait = savoir_faire_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = savoir_faire_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = savoir_faire_II 
		}
		
		custom_tooltip = { text = savoir_faire_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_savoir_faire_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = savoir_faire_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = knowledge_III
			trait = savoir_faire_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = savoir_faire_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = savoir_faire_III
		}
		
		custom_tooltip = { text = savoir_faire_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_savoir_faire_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = savoir_faire_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = savoir_faire_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = savoir_faire_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = savoir_faire_IV
		}
		
		custom_tooltip = { text = savoir_faire_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_singer_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = singer_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = singer_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = singer_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = singer_II
		}
		
		custom_tooltip = { text = singer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_singer_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = singer_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = singer_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = singer_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = singer_III
		}
		
		custom_tooltip = { text = singer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_singer_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = singer_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = singer_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = singer_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = singer_IV
		}
		
		custom_tooltip = { text = singer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Intrigue Stat
#Criminal Underground Discipline

	purchase_criminal_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = criminal_I 
		}
		
		custom_tooltip = { text = criminal_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_criminal_I = {
		is_high_prio = yes 
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = criminal_I
			has_building = ct_criminal_underground_2 
		}
		
		allow = {
			trait = criminal_I
			has_building = ct_criminal_underground_2 
		}
		
		effect = {
			remove_trait = criminal_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = criminal_II
		}
		
		custom_tooltip = { text = criminal_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_criminal_II = {
		is_high_prio = yes 
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = criminal_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = criminal_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = criminal_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = criminal_III
		}
		
		custom_tooltip = { text = criminal_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_criminal_III = {
		is_high_prio = yes 
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = criminal_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = criminal_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = criminal_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = criminal_IV
		}
		
		custom_tooltip = { text = criminal_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Criminal Underground Traits

	purchase_disguise_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = disguise_I 
		}
		
		custom_tooltip = { text = disguise_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_disguise_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = disguise_I
			has_building = ct_criminal_underground_2
		}
		
		allow = {
			trait = knowledge_II
			trait = disguise_I
			has_building = ct_criminal_underground_2
		}
		
		effect = {
			remove_trait = disguise_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = disguise_II
		}
		
		custom_tooltip = { text = disguise_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_disguise_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = disguise_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = knowledge_III
			trait = disguise_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = disguise_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = disguise_III
		}
		
		custom_tooltip = { text = disguise_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_disguise_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = disguise_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = disguise_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = disguise_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = disguise_IV
		}
		
		custom_tooltip = { text = disguise_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_fast_talk_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_talk_I 
		}
		
		custom_tooltip = { text = fast_talk_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fast_talk_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = fast_talk_I
			has_building = ct_criminal_underground_2
		}
		
		allow = {
			trait = knowledge_II
			trait = fast_talk_I
			has_building = ct_criminal_underground_2
		}
		
		effect = {
			remove_trait = fast_talk_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_talk_II 
		}
		
		custom_tooltip = { text = fast_talk_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fast_talk_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = fast_talk_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = knowledge_III
			trait = fast_talk_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = fast_talk_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_talk_III
		}
		
		custom_tooltip = { text = fast_talk_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_fast_talk_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = fast_talk_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = fast_talk_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = fast_talk_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = fast_talk_IV
		}
		
		custom_tooltip = { text = fast_talk_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_forced_entry_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forced_entry_I 
		}
		
		custom_tooltip = { text = forced_entry_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_forced_entry_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = forced_entry_I
			has_building = ct_criminal_underground_2
		}
		
		allow = {
			trait = knowledge_II
			trait = forced_entry_I
			has_building = ct_criminal_underground_2
		}
		
		effect = {
			remove_trait = forced_entry_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forced_entry_II 
		}
		
		custom_tooltip = { text = forced_entry_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_forced_entry_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = forced_entry_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = knowledge_III
			trait = forced_entry_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = forced_entry_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forced_entry_III
		}
		
		custom_tooltip = { text = forced_entry_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_forced_entry_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = forced_entry_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = forced_entry_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = forced_entry_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forced_entry_IV
		}
		
		custom_tooltip = { text = forced_entry_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_observation_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = observation_I
		}
		
		custom_tooltip = { text = observation_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_observation_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = observation_I
			has_building = ct_criminal_underground_2
		}
		
		allow = {
			trait = knowledge_II
			trait = observation_I
			has_building = ct_criminal_underground_2
		}
		
		effect = {
			remove_trait = observation_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = observation_II
		}
		
		custom_tooltip = { text = observation_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_observation_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = observation_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = knowledge_III
			trait = observation_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = observation_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = observation_III
		}
		
		custom_tooltip = { text = observation_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_observation_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = observation_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = observation_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = observation_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = observation_IV
		}
		
		custom_tooltip = { text = observation_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_smuggling_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = smuggling_I
		}
		
		custom_tooltip = { text = smuggling_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_smuggling_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = smuggling_I
			has_building = ct_criminal_underground_2
		}
		
		allow = {
			trait = knowledge_II
			trait = smuggling_I
			has_building = ct_criminal_underground_2
		}
		
		effect = {
			remove_trait = smuggling_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = smuggling_II
		}
		
		custom_tooltip = { text = smuggling_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_smuggling_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = smuggling_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = knowledge_III
			trait = smuggling_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = smuggling_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = smuggling_III
		}
		
		custom_tooltip = { text = smuggling_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_smuggling_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = smuggling_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = smuggling_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = smuggling_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = smuggling_IV
		}
		
		custom_tooltip = { text = smuggling_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_streetwise_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		allow = {
			trait = knowledge_I
			has_building = ct_criminal_underground_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = streetwise_I
		}
		
		custom_tooltip = { text = streetwise_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_streetwise_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = knowledge_II
			trait = streetwise_I
			has_building = ct_criminal_underground_2
		}
		
		allow = {
			trait = knowledge_II
			trait = streetwise_I
			has_building = ct_criminal_underground_2
		}
		
		effect = {
			remove_trait = streetwise_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = streetwise_II
		}
		
		custom_tooltip = { text = streetwise_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_streetwise_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = knowledge_III
			trait = streetwise_II
			has_building = ct_criminal_underground_3
		}
		
		allow = {
			trait = knowledge_III
			trait = streetwise_II
			has_building = ct_criminal_underground_3
		}
		
		effect = {
			remove_trait = streetwise_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = streetwise_III
		}
		
		custom_tooltip = { text = streetwise_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_streetwise_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = knowledge_IV
			trait = streetwise_III
			has_building = ct_criminal_underground_4
		}
		
		allow = {
			trait = knowledge_IV
			trait = streetwise_III
			has_building = ct_criminal_underground_4
		}
		
		effect = {
			remove_trait = streetwise_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = streetwise_IV
		}
		
		custom_tooltip = { text = streetwise_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Spycraft Discipline

	purchase_spycraft_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ca_spy_network_1
		}
		
		allow = {
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = spycraft_I 
		}
		
		custom_tooltip = { text = spycraft_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_spycraft_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_I
			has_building = ca_spy_network_2 
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_2 
		}
		
		effect = {
			remove_trait = spycraft_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = spycraft_II 
		}
		
		custom_tooltip = { text = spycraft_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_spycraft_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = spycraft_II
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = spycraft_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = spycraft_III
		}
		
		custom_tooltip = { text = spycraft_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_spycraft_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = spycraft_III
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = spycraft_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = spycraft_IV
		}
		
		custom_tooltip = { text = spycraft_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Spycraft Traits

	purchase_assassination_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = assassination_I 
		}
		
		custom_tooltip = { text = assassination_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_assassination_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = assassination_I
			has_building = ca_spy_network_2
		}
		
		allow ={
			trait = spycraft_II
			trait = assassination_I
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = assassination_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = assassination_II 
		}
		
		custom_tooltip = { text = assassination_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_assassination_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = assassination_II
			has_building = ca_spy_network_3
		}
		
		allow ={
			trait = spycraft_III
			trait = assassination_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = assassination_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = assassination_III
		}
		
		custom_tooltip = { text = assassination_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_assassination_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = assassination_III
			has_building = ca_spy_network_4
		}
		
		allow ={
			trait = spycraft_IV
			trait = assassination_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = assassination_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = assassination_IV
		}
		
		custom_tooltip = { text = assassination_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_counterfeiting_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = counterfeiting_I
		}
		
		custom_tooltip = { text = counterfeiting_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_counterfeiting_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = counterfeiting_I
			has_building = ca_spy_network_2
		}
		
		allow = {
			trait = spycraft_II
			trait = counterfeiting_I
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = counterfeiting_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = counterfeiting_II
		}
		
		custom_tooltip = { text = counterfeiting_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_counterfeiting_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = counterfeiting_II
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_III
			trait = counterfeiting_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = counterfeiting_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = counterfeiting_III
		}
		
		custom_tooltip = { text = counterfeiting_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_counterfeiting_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = counterfeiting_III
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_IV
			trait = counterfeiting_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = counterfeiting_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = counterfeiting_IV
		}
		
		custom_tooltip = { text = counterfeiting_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_forgery_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forgery_I
		}
		
		custom_tooltip = { text = forgery_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_forgery_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = forgery_I
			has_building = ca_spy_network_2
		}
		
		allow = {
			trait = spycraft_II
			trait = forgery_I
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = forgery_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forgery_II
		}
		
		custom_tooltip = { text = forgery_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
		
	upgrade_forgery_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = forgery_II
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_III
			trait = forgery_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = forgery_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forgery_III
		}
		
		custom_tooltip = { text = forgery_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
		
	upgrade_forgery_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = forgery_III
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_IV
			trait = forgery_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = forgery_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = forgery_IV
		}
		
		custom_tooltip = { text = forgery_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
		
	purchase_poison_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poison_I 
		}
		
		custom_tooltip = { text = poison_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poison_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = poison_I
			has_building = ca_spy_network_2
		}
		
		allow = {
			trait = spycraft_II
			trait = poison_I
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = poison_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poison_II
		}
		
		custom_tooltip = { text = poison_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poison_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = poison_II
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_III
			trait = poison_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = poison_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poison_III
		}
		
		custom_tooltip = { text = poison_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poison_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = poison_III
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_IV
			trait = poison_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = poison_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poison_IV
		}
		
		custom_tooltip = { text = poison_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_stealth_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = stealth_I 
		}
		
		custom_tooltip = { text = stealth_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_stealth_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = stealth_I
			has_building = ca_spy_network_2
		}
		
		allow = {
			trait = spycraft_II
			trait = stealth_I
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = stealth_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = stealth_II
		}
		
		custom_tooltip = { text = stealth_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_stealth_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = stealth_II
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_III
			trait = stealth_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = stealth_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = stealth_III
		}
		
		custom_tooltip = { text = stealth_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_stealth_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = stealth_III
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_IV
			trait = stealth_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = stealth_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = stealth_IV
		}
		
		custom_tooltip = { text = stealth_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_throwing_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = throwing_I 
		}
		
		custom_tooltip = { text = throwing_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_throwing_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = throwing_I
			has_building = ca_spy_network_2
		}
		
		allow = {
			trait = spycraft_II
			trait = throwing_I
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = throwing_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = throwing_II
		}
		
		custom_tooltip = { text = throwing_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_throwing_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = throwing_II
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_III
			trait = throwing_II
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = throwing_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = throwing_III
		}
		
		custom_tooltip = { text = throwing_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_throwing_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = throwing_III
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_IV
			trait = throwing_III
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = throwing_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = throwing_IV
		}
		
		custom_tooltip = { text = throwing_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_amateurish_plotter = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		allow = {
			trait = spycraft_I
			has_building = ca_spy_network_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = amateurish_plotter
		}
		
		custom_tooltip = { text = amateurish_plotter_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_amateurish_plotter  = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = spycraft_II
			trait = amateurish_plotter
			has_building = ca_spy_network_2
		}
		
		allow = {
			trait = spycraft_II
			trait = amateurish_plotter
			has_building = ca_spy_network_2
		}
		
		effect = {
			remove_trait = amateurish_plotter
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = flamboyant_schemer
		}
		
		custom_tooltip = { text = amateurish_plotter_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_flamboyant_schemer  = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = spycraft_III
			trait = flamboyant_schemer
			has_building = ca_spy_network_3
		}
		
		allow = {
			trait = spycraft_III
			trait = flamboyant_schemer
			has_building = ca_spy_network_3
		}
		
		effect = {
			remove_trait = flamboyant_schemer
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = intricate_webweaver
		}
		
		custom_tooltip = { text = amateurish_plotter_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_intricate_webweaver  = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = spycraft_IV
			trait = intricate_webweaver
			has_building = ca_spy_network_4
		}
		
		allow = {
			trait = spycraft_IV
			trait = intricate_webweaver
			has_building = ca_spy_network_4
		}
		
		effect = {
			remove_trait = intricate_webweaver
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = elusive_shadow
		}
		
		custom_tooltip = { text = amateurish_plotter_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Disciplines

	purchase_animal_handling_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_herdsman_1
		}
		
		allow = {
			has_building = ct_herdsman_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = animal_handling_I
		}
		
		custom_tooltip = { text = animal_handling_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_animal_handling_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = animal_handling_I
			has_building = ct_herdsman_2 
		}
		
		allow = {
			trait = animal_handling_I
			has_building = ct_herdsman_2
		}
		
		effect = {
			remove_trait = animal_handling_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = animal_handling_II
		}
		
		custom_tooltip = { text = animal_handling_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_animal_handling_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = animal_handling_II
			has_building = ct_herdsman_3
		}
		
		allow = {
			trait = animal_handling_II
			has_building = ct_herdsman_3
		}
		
		effect = {
			remove_trait = animal_handling_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = animal_handling_III
		}
		
		custom_tooltip = { text = animal_handling_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_animal_handling_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = animal_handling_III
			has_building = ct_herdsman_4
		}
		
		allow = {
			trait = animal_handling_III
			has_building = ct_herdsman_4
		}
		
		effect = {
			remove_trait = animal_handling_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = animal_handling_IV
		}
		
		custom_tooltip = { text = animal_handling_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Animal Handling Traits

	purchase_falconer_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = animal_handling_I
			has_building = ct_herdsman_1
		}
		
		allow = {
			trait = animal_handling_I
			has_building = ct_herdsman_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = falconer_I
		}
		
		custom_tooltip = { text = falconer_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_falconer_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = animal_handling_II
			trait = falconer_I
			has_building = ct_herdsman_2
		}
		
		allow = {
			trait = animal_handling_II
			trait = falconer_I
			has_building = ct_herdsman_2
		}
		
		effect = {
			remove_trait = falconer_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = falconer_II
		}
		
		custom_tooltip = { text = falconer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_falconer_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = animal_handling_III
			trait = falconer_II
			has_building = ct_herdsman_3
		}
		
		allow = {
			trait = animal_handling_III
			trait = falconer_II
			has_building = ct_herdsman_3
		}
		
		effect = {
			remove_trait = falconer_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = falconer_III
		}
		
		custom_tooltip = { text = falconer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_falconer_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = animal_handling_IV
			trait = falconer_III
			has_building = ct_herdsman_4
		}
		
		allow = {
			trait = animal_handling_IV
			trait = falconer_III
			has_building = ct_herdsman_4
		}
		
		effect = {
			remove_trait = falconer_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = falconer_IV
		}
		
		custom_tooltip = { text = falconer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_warhorse_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = animal_handling_I
			has_building = ct_herdsman_1
		}
		
		allow = {
			trait = animal_handling_I
			has_building = ct_herdsman_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = warhorse_I
		}
		
		custom_tooltip = { text = warhorse_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_warhorse_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = animal_handling_II
			trait = warhorse_I
			has_building = ct_herdsman_2
		}
		
		allow = {
			trait = animal_handling_II
			trait = warhorse_I
			has_building = ct_herdsman_2
		}
		
		effect = {
			remove_trait = warhorse_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = warhorse_II
		}
		
		custom_tooltip = { text = warhorse_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_warhorse_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = animal_handling_III
			trait = warhorse_II
			has_building = ct_herdsman_3
		}
		
		allow = {
			trait = animal_handling_III
			trait = warhorse_II
			has_building = ct_herdsman_3
		}
		
		effect = {
			remove_trait = warhorse_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = warhorse_III
		}
		
		custom_tooltip = { text = warhorse_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_warhorse_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = animal_handling_IV
			trait = warhorse_III
			has_building = ct_herdsman_4
		}
		
		allow = {
			trait = animal_handling_IV
			trait = warhorse_III
			has_building = ct_herdsman_4
		}
		
		effect = {
			remove_trait = warhorse_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = warhorse_IV
		}
		
		custom_tooltip = { text = warhorse_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Arts Disciplines

	purchase_arts_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = arts_I
		}
		
		custom_tooltip = { text = arts_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_arts_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = arts_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = arts_II
		}
		
		custom_tooltip = { text = arts_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_arts_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = arts_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = arts_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = arts_III
		}
		
		custom_tooltip = { text = arts_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_arts_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = arts_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = arts_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = arts_IV
		}
		
		custom_tooltip = { text = arts_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Arts Traits
	purchase_writer_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = arts_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = arts_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = writer_I
		}
		
		custom_tooltip = { text = writer_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_writer_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = arts_II
			trait = writer_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = arts_II
			trait = writer_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = writer_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = writer_II
		}
		
		custom_tooltip = { text = writer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_writer_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = arts_III
			trait = writer_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = arts_III
			trait = writer_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = writer_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = writer_III
		}
		
		custom_tooltip = { text = writer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_writer_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = arts_IV
			trait = writer_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = arts_IV
			trait = writer_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = writer_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = writer_IV
		}
		
		custom_tooltip = { text = writer_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Weapon Design Discipline

	purchase_weapon_design_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_design_I
		}
		
		custom_tooltip = { text = weapon_design_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_weapon_design_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_design_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = weapon_design_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = weapon_design_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_design_II
		}
		
		custom_tooltip = { text = weapon_design_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_weapon_design_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = weapon_design_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = weapon_design_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = weapon_design_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_design_III
		}
		
		custom_tooltip = { text = weapon_design_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_weapon_design_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = weapon_design_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = weapon_design_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = weapon_design_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = weapon_design_IV
		}
		
		custom_tooltip = { text = weapon_design_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Weapon Design Trait

	purchase_siege_engineering_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_design_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = weapon_design_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engineering_I
		}
		
		custom_tooltip = { text = siege_engineering_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_siege_engineering_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_design_II
			trait = siege_engineering_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = weapon_design_II
			trait = siege_engineering_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = siege_engineering_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engineering_II
		}
		
		custom_tooltip = { text = siege_engineering_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_siege_engineering_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_design_III
			trait = siege_engineering_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = weapon_design_III
			trait = siege_engineering_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = siege_engineering_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engineering_III
		}
		
		custom_tooltip = { text = siege_engineering_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_siege_engineering_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_design_IV
			trait = siege_engineering_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = weapon_design_IV
			trait = siege_engineering_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = siege_engineering_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = siege_engineering_IV
		}
		
		custom_tooltip = { text = siege_engineering_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
		
	purchase_metallurgy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = weapon_design_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = weapon_design_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = metallurgy_I
		}
		
		custom_tooltip = { text = metallurgy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_metallurgy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = weapon_design_II
			trait = metallurgy_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = weapon_design_II
			trait = metallurgy_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = metallurgy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = metallurgy_II
		}
		
		custom_tooltip = { text = metallurgy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_metallurgy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = weapon_design_III
			trait = metallurgy_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = weapon_design_III
			trait = metallurgy_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = metallurgy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = metallurgy_III
		}
		
		custom_tooltip = { text = metallurgy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_metallurgy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = weapon_design_IV
			trait = metallurgy_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = weapon_design_IV
			trait = metallurgy_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = metallurgy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = metallurgy_IV
		}
		
		custom_tooltip = { text = metallurgy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Design Discipline

	purchase_design_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = design_I
		}
		
		custom_tooltip = { text = design_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_design_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = design_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = design_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = design_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = design_II
		}
		
		custom_tooltip = { text = design_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_design_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = design_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = design_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = design_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = design_III
		}
		
		custom_tooltip = { text = design_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_design_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = design_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = design_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = design_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = design_IV
		}
		
		custom_tooltip = { text = design_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}

#Design Discipline Traits

purchase_architecture_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = design_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = design_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = architecture_I
		}
		
		custom_tooltip = { text = architecture_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_architecture_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = design_II
			trait = architecture_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = design_II
			trait = architecture_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = architecture_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = architecture_II
		}
		
		custom_tooltip = { text = architecture_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_architecture_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = design_III
			trait = architecture_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = design_III
			trait = architecture_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = architecture_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = architecture_III
		}
		
		custom_tooltip = { text = architecture_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_architecture_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = design_IV
			trait = architecture_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = design_IV
			trait = architecture_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = architecture_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = architecture_IV
		}
		
		custom_tooltip = { text = architecture_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_engineering_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = design_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = design_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = engineering_I
		}
		
		custom_tooltip = { text = engineering_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_engineering_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = design_II
			trait = engineering_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = design_II
			trait = engineering_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = engineering_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = engineering_II
		}
		
		custom_tooltip = { text = engineering_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_engineering_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = design_III
			trait = engineering_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = design_III
			trait = engineering_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = engineering_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = engineering_III
		}
		
		custom_tooltip = { text = engineering_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_engineering_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = design_IV
			trait = engineering_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = design_IV
			trait = engineering_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = engineering_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = engineering_IV
		}
		
		custom_tooltip = { text = engineering_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Medicine Discipline

	purchase_medicine_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = medicine_I
		}
		
		custom_tooltip = { text = medicine_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_medicine_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = medicine_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = medicine_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = medicine_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = medicine_II
		}
		
		custom_tooltip = { text = medicine_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_medicine_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = medicine_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = medicine_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = medicine_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = medicine_III
		}
		
		custom_tooltip = { text = medicine_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_medicine_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = medicine_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = medicine_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = medicine_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = medicine_IV
		}
		
		custom_tooltip = { text = medicine_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}

#Medicine Discipline Traits

purchase_herbalism_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = medicine_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = medicine_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = herbalism_I
		}
		
		custom_tooltip = { text = herbalism_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_herbalism_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = medicine_II
			trait = herbalism_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = medicine_II
			trait = herbalism_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = herbalism_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = herbalism_II
		}
		
		custom_tooltip = { text = herbalism_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_herbalism_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = medicine_III
			trait = herbalism_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = medicine_III
			trait = herbalism_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = herbalism_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = herbalism_III
		}
		
		custom_tooltip = { text = herbalism_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_herbalism_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = medicine_IV
			trait = herbalism_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = medicine_IV
			trait = herbalism_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = herbalism_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = herbalism_IV
		}
		
		custom_tooltip = { text = herbalism_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_physician_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = medicine_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = medicine_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physician_I
		}
		
		custom_tooltip = { text = physician_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_physician_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = medicine_II
			trait = physician_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = medicine_II
			trait = physician_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = physician_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physician_II
		}
		
		custom_tooltip = { text = physician_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_physician_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = medicine_III
			trait = physician_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = medicine_III
			trait = physician_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = physician_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physician_III
		}
		
		custom_tooltip = { text = physician_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_physician_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = medicine_IV
			trait = physician_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = medicine_IV
			trait = physician_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = physician_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physician_IV
		}
		
		custom_tooltip = { text = physician_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Sciences Discipline

	purchase_sciences_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = sciences_I
		}
		
		custom_tooltip = { text = sciences_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_sciences_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = sciences_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = sciences_II
		}
		
		custom_tooltip = { text = sciences_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_sciences_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = sciences_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = sciences_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = sciences_III
		}
		
		custom_tooltip = { text = sciences_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_sciences_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = sciences_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = sciences_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = sciences_IV
		}
		
		custom_tooltip = { text = sciences_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Sciences Traits

	purchase_protective_alchemy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = protective_alchemy_I
		}
		
		custom_tooltip = { text = protective_alchemy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_protective_alchemy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = protective_alchemy_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = protective_alchemy_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = protective_alchemy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = protective_alchemy_II
		}
		
		custom_tooltip = { text = protective_alchemy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_protective_alchemy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = protective_alchemy_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = protective_alchemy_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = protective_alchemy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = protective_alchemy_III
		}
		
		custom_tooltip = { text = protective_alchemy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_protective_alchemy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = protective_alchemy_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = protective_alchemy_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = protective_alchemy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = protective_alchemy_IV
		}
		
		custom_tooltip = { text = protective_alchemy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_poisonous_alchemy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poisonous_alchemy_I
		}
		
		custom_tooltip = { text = poisonous_alchemy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poisonous_alchemy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = poisonous_alchemy_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = poisonous_alchemy_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = poisonous_alchemy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poisonous_alchemy_II
		}
		
		custom_tooltip = { text = poisonous_alchemy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poisonous_alchemy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = poisonous_alchemy_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = poisonous_alchemy_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = poisonous_alchemy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poisonous_alchemy_III
		}
		
		custom_tooltip = { text = poisonous_alchemy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_poisonous_alchemy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = poisonous_alchemy_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = poisonous_alchemy_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = poisonous_alchemy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = poisonous_alchemy_IV
		}
		
		custom_tooltip = { text = poisonous_alchemy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_anthropology_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = anthropology_I
		}
		
		custom_tooltip = { text = anthropology_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_anthropology_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = anthropology_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = anthropology_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = anthropology_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = anthropology_II
		}
		
		custom_tooltip = { text = anthropology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_anthropology_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = anthropology_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = anthropology_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = anthropology_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = anthropology_III
		}
		
		custom_tooltip = { text = anthropology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_anthropology_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = anthropology_III
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_IV
			trait = anthropology_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = anthropology_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = anthropology_IV
		}
		
		custom_tooltip = { text = anthropology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_archaelogy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = archaelogy_I
		}
		
		custom_tooltip = { text = archaelogy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_archaelogy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = archaelogy_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = archaelogy_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = archaelogy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = archaelogy_II
		}
		
		custom_tooltip = { text = archaelogy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_archaelogy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = archaelogy_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = archaelogy_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = archaelogy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = archaelogy_III
		}
		
		custom_tooltip = { text = archaelogy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_archaelogy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = archaelogy_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = archaelogy_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = archaelogy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = archaelogy_IV
		}
		
		custom_tooltip = { text = archaelogy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_astronomy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = astronomy_I
		}
		
		custom_tooltip = { text = astronomy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_astronomy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = astronomy_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = astronomy_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = astronomy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = astronomy_II
		}
		
		custom_tooltip = { text = astronomy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_astronomy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = astronomy_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = astronomy_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = astronomy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = astronomy_III
		}
		
		custom_tooltip = { text = astronomy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_astronomy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = astronomy_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = astronomy_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = astronomy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = astronomy_IV
		}
		
		custom_tooltip = { text = astronomy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_geology_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geology_I
		}
		
		custom_tooltip = { text = geology_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_geology_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = geology_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = geology_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = geology_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geology_II
		}
		
		custom_tooltip = { text = geology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_geology_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = geology_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = geology_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = geology_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geology_III
		}
		
		custom_tooltip = { text = geology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_geology_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = geology_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = geology_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = geology_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geology_IV
		}
		
		custom_tooltip = { text = geology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_geography_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geography_I
		}
		
		custom_tooltip = { text = geography_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_geography_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = geography_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = geography_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = geography_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geography_II
		}
		
		custom_tooltip = { text = geography_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_geography_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = geography_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = geography_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = geography_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geography_III
		}
		
		custom_tooltip = { text = geography_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_geography_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = geography_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = geography_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = geography_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = geography_IV
		}
		
		custom_tooltip = { text = geography_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_mathematics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mathematics_I
		}
		
		custom_tooltip = { text = mathematics_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_mathematics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = mathematics_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = mathematics_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = mathematics_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mathematics_II
		}
		
		custom_tooltip = { text = mathematics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_mathematics_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = mathematics_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = mathematics_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = mathematics_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mathematics_III
		}
		
		custom_tooltip = { text = mathematics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_mathematics_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = mathematics_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = mathematics_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = mathematics_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mathematics_IV
		}
		
		custom_tooltip = { text = mathematics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}

	purchase_physics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = sciences_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = sciences_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physics_I
		}
		
		custom_tooltip = { text = physics_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_physics_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = sciences_II
			trait = physics_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = sciences_II
			trait = physics_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = physics_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physics_II
		}
		
		custom_tooltip = { text = physics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_physics_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = sciences_III
			trait = physics_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = sciences_III
			trait = physics_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = physics_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physics_III
		}
		
		custom_tooltip = { text = physics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_physics_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = sciences_IV
			trait = physics_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = sciences_IV
			trait = physics_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = physics_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = physics_IV
		}
		
		custom_tooltip = { text = physics_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Scholarly Discipline

	purchase_learning_scholarly_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			has_building = ct_university_1
		}
		
		allow = {
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = learning_scholarly_I
		}
		
		custom_tooltip = { text = learning_scholarly_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.1 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_learning_scholarly_I = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = learning_scholarly_I
			has_building = ct_university_2
		}
		
		allow = {
			trait = learning_scholarly_I
			has_building = ct_university_2
		}
		
		effect = {
			remove_trait = learning_scholarly_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = learning_scholarly_II
		}
		
		custom_tooltip = { text = learning_scholarly_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_learning_scholarly_II = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 40 }
			trait = learning_scholarly_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = learning_scholarly_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = learning_scholarly_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = learning_scholarly_III
		}
		
		custom_tooltip = { text = learning_scholarly_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_learning_scholarly_III = {
		is_high_prio = yes
		potential = {
			is_variable_equal = { which = experience_pool value = 60 }
			trait = learning_scholarly_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = learning_scholarly_III
			has_building = ct_university_4
		}
		
		effect = {
			remove_trait = learning_scholarly_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = learning_scholarly_IV
		}
		
		custom_tooltip = { text = learning_scholarly_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.2 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Scholarly Traits
	
	purchase_literature_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = learning_scholarly_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = learning_scholarly_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = literature_I
		}
		
		custom_tooltip = { text = literature_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_literature_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = learning_scholarly_II
			trait = literature_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = learning_scholarly_II
			trait = literature_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = literature_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = literature_II
		}
		
		custom_tooltip = { text = literature_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_literature_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = learning_scholarly_III
			trait = literature_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = learning_scholarly_III
			trait = literature_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = literature_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = literature_III
		}
		
		custom_tooltip = { text = literature_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_literature_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = learning_scholarly_IV
			trait = literature_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = learning_scholarly_IV
			trait = literature_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = literature_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = literature_IV
		}
		
		custom_tooltip = { text = literature_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	purchase_teaching_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = learning_scholarly_I
			has_building = ct_university_1
		}
		
		allow = {
			trait = learning_scholarly_I
			has_building = ct_university_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = teaching_I
		}
		
		custom_tooltip = { text = teaching_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_teaching_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = learning_scholarly_II
			trait = teaching_I
			has_building = ct_university_2 
		}
		
		allow = {
			trait = learning_scholarly_II
			trait = teaching_I
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = teaching_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = teaching_II
		}
		
		custom_tooltip = { text = teaching_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_teaching_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = learning_scholarly_III
			trait = teaching_II
			has_building = ct_university_3
		}
		
		allow = {
			trait = learning_scholarly_III
			trait = teaching_II
			has_building = ct_university_3
		}
		
		effect = {
			remove_trait = teaching_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = teaching_III
		}
		
		custom_tooltip = { text = teaching_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_teaching_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = learning_scholarly_IV
			trait = teaching_III
			has_building = ct_university_4
		}
		
		allow = {
			trait = learning_scholarly_IV
			trait = teaching_III
			has_building = ct_university_2 
		}
		
		effect = {
			remove_trait = teaching_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = teaching_IV
		}
		
		custom_tooltip = { text = teaching_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Learning Temple School Discipline

	purchase_theology_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			has_building = tp_school_1
		}
		
		allow = {
			has_building = tp_school_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = theology_I
		}
		
		custom_tooltip = { text = theology_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_theology_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = theology_I
			has_building = tp_school_2 
		}
		
		allow = {
			trait = theology_I
			has_building = tp_school_2 
		}
		
		effect = {
			remove_trait = theology_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = theology_II
		}
		
		custom_tooltip = { text = theology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_theology_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = theology_II
			has_building = tp_school_3
		}
		
		allow = {
			trait = theology_II
			has_building = tp_school_3
		}
		
		effect = {
			remove_trait = theology_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = theology_III
		}
		
		custom_tooltip = { text = theology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_theology_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = theology_III
			has_building = tp_school_4
		}
		
		allow = {
			trait = theology_III
			has_building = tp_school_4
		}
		
		effect = {
			remove_trait = theology_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = theology_IV
		}
		
		custom_tooltip = { text = theology_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
#Temple School Traits

	purchase_philosophy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = theology_I
			has_building = tp_school_1
		}
		
		allow = {
			trait = theology_I
			has_building = tp_school_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = philosophy_I
		}
		
		custom_tooltip = { text = philosophy_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_philosophy_I = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = theology_II
			trait = philosophy_I
			has_building = tp_school_2 
		}
		
		allow = {
			trait = theology_II
			trait = philosophy_I
			has_building = tp_school_2 
		}
		
		effect = {
			remove_trait = philosophy_I
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = philosophy_II
		}
		
		custom_tooltip = { text = philosophy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_philosophy_II = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = theology_III
			trait = philosophy_II
			has_building = tp_school_3
		}
		
		allow = {
			trait = theology_III
			trait = philosophy_II
			has_building = tp_school_3
		}
		
		effect = {
			remove_trait = philosophy_II
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = philosophy_III
		}
		
		custom_tooltip = { text = philosophy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_philosophy_III = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = theology_IV
			trait = philosophy_III
			has_building = tp_school_4
		}
		
		allow = {
			trait = theology_IV
			trait = philosophy_III
			has_building = tp_school_4
		}
		
		effect = {
			remove_trait = philosophy_III
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = philosophy_IV
		}
		
		custom_tooltip = { text = philosophy_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
		
	purchase_detached_priest = {
		potential = {
			is_variable_equal = { which = experience_pool value = 5 }
			trait = theology_I
			has_building = tp_school_1
		}
		
		allow = {
			trait = theology_I
			has_building = tp_school_1
		}
		
		effect = {
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = detached_priest
		}
		
		custom_tooltip = { text = detached_priest_purchase }
		hidden_tooltip = { character_event = { id = TOSDE.3 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_martial_cleric = {
		potential = {
			is_variable_equal = { which = experience_pool value = 10 }
			trait = theology_II
			trait = detached_priest
			has_building = tp_school_2 
		}
		
		allow = {
			trait = theology_II
			trait = detached_priest
			has_building = tp_school_2 
		}
		
		effect = {
			remove_trait = detached_priest
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = martial_cleric
		}
		
		custom_tooltip = { text = detached_priest_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_martial_cleric = {
		potential = {
			is_variable_equal = { which = experience_pool value = 20 }
			trait = theology_III
			trait = martial_cleric
			has_building = tp_school_3
		}
		
		allow = {
			trait = theology_III
			trait = martial_cleric
			has_building = tp_school_3
		}
		
		effect = {
			remove_trait = martial_cleric
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = scholarly_theologian
		}
		
		custom_tooltip = { text = detached_priest_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	upgrade_scholarly_theologian = {
		potential = {
			is_variable_equal = { which = experience_pool value = 30 }
			trait = theology_IV
			trait = scholarly_theologian
			has_building = tp_school_4
		}
		
		allow = {
			trait = theology_IV
			trait = scholarly_theologian
			has_building = tp_school_4
		}
		
		effect = {
			remove_trait = scholarly_theologian
			subtract_variable = { which = experience_cost which = experience_pool }
			add_trait = mastermind_theologian
		}
		
		custom_tooltip = { text = detached_priest_upgrade }
		hidden_tooltip = { character_event = { id = TOSDE.4 } }
		
		ai_will_do = {
			factor = 0.5
		}
	}
	
	equipment_shop = {
		potential = {
			OR = {
				trait = axe_I
				trait = mace_I
				trait = arming_sword_I
				trait = dagger_I
				trait = lance_I
				trait = polearm_I
				trait = rapier_main_gauche_I
				trait = saber_I
				trait = short_sword_I
				trait = spear_I
				trait = staff_I
				trait = battleaxe_I
				trait = 2h_mace_I
				trait = longsword_I
				trait = horse_bow_I
				trait = long_bow_I
				trait = bow_I
				trait = crossbow_I
				trait = knights_shield_I
				trait = round_shield_I
				trait = buckler_I
				trait = targe_I
				trait = scutum_I
				trait = aspis_I
				trait = cloth_armour_I
				trait = leather_armour_I
				trait = mail_armour_I
				trait = halfplate_I
				trait = fullplate_I
			}
		}
		
		effect = {
			hidden_tooltip = { character_event = { id = TOSDE.5 } } 
		}
	}
}