######################################################
#  Events for Jewish Characters in Monotheism Rising #
#													 #
#   Created by ThePatriot1776						 #
######################################################
namespace = ExIs

#Beginning of Israel Game
narrative_event = {
	id = ExIs.100
	title = EVTNAME_ExIs_100
	desc = EVTDESC_ExIs_100
	picture = GFX_evt_jerusalem_captured_jews
	border = GFX_event_narrative_frame_war
	
	major = no
	
	trigger = {
		has_landed_title = d_jerusalem
		is_ruler = yes
		
		NOT = { has_global_flag = jerusalem_taken_by_jews }
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = .01
		}
	}
	
	immediate = { 
		set_global_flag = jerusalem_taken_by_jews
	}	
	
	option = {
		name = EVTOPTA_ExIs_100
		hidden_tooltip = { 
			character_event = { id = ExIs.125 }
		}
	}
}

#The HaMashiakh has come!
narrative_event = {
	id = ExIs.101
	title = EVTNAME_ExIs_101
	desc = EVTDESC_ExIs_101
	picture = GFX_evt_throne_room
	border = GFX_event_narrative_frame_religion
	
	trigger = {
		has_landed_title = k_israel
		is_ruler = yes
		has_global_flag = found_aarons_rod
		trait = davidic_line
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = .01
		}
	}
	
	option = { 
		name = EVTOPTA_ExIs_101
		add_character_modifier = {
			name = voice_of_yahweh duration = -1
		}
		add_trait = hamashiakh
		add_trait = holy_warrior
		set_character_flag = the_hamashiakh
		
	}
}	

#Children gains the Ben HaMashiakh trait
character_event = {
    id = ExIs_102
	title = EVTNAME_ExIs_102
	
    hide_window = yes
	
	trigger = {
		OR = {
			mother = { trait = hamashiakh }
			father = { trait = hamashiakh }
			mother = { trait = ben_hamashiakh }
			father = { trait = ben_hamashiakh } 
		}
		NOT = {
			has_character_flag = the_ben_hamashiakh
		}
	}
	
	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = .01
		}
	}
	
	option = {
		name = EVTOPTA_ExIs_102
		add_trait = ben_hamashiakh
		set_character_flag = the_ben_hamashiakh
	}
}

#Expulsion and Welcome Back Events

# Muslims Expelled
narrative_event = {
	id = ExIs.103
	title = EVTNAME_ExIs_103
	desc = EVTDESC_ExIs_103
	picture = GFX_evt_jewish_market
	border = GFX_event_narrative_frame_religion
	major = no
		
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_ExIs_103
		wealth = 200
		prestige = -100
		banish_religion = muslim
		hidden_tooltip = {
			any_realm_lord = {
				character_event = { id = ExIs.105 }
			}
		}
	}
}

# Muslims Welcomed Back
narrative_event = {
	id = ExIs.104
	title = EVTNAME_ExIs_104
	desc = EVTDESC_ExIs_104
	picture = GFX_evt_jewish_market
	border = GFX_event_narrative_frame_religion
	major = no
		
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_ExIs_104
		prestige = 50
		hidden_tooltip = {
			any_realm_lord = {
				limit = { ai = no }
				character_event = { id = ExIs.106 }
			}
		}
	}
}

# Muslims Expelled (Notifier for Vassals)
character_event = {
	id = ExIs_105
	title = EVTNAME_ExIs_105
	desc = EVTDESC_ExIs_105
	picture = GFX_evt_jewish_market
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExI_105
	}
}

# Muslims Welcomed Back (Notifier for Vassals)
character_event = {
	id = ExIs.106
	title = EVTNAME_ExIs_106
	desc = EVTDESC_ExIs_106
	picture = GFX_evt_jewish_market
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExIs_106
	}
}

# Christians Expelled
narrative_event = {
	id = ExIs.107
	title = EVTNAME_ExIs_107
	desc = EVTDESC_ExIs_107
	picture = GFX_evt_jewish_market
	border = GFX_event_narrative_frame_religion
	major = no
	
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_ExIs_107
		wealth = 200
		prestige = -100
		banish_religion = christian
		hidden_tooltip = {
			any_realm_lord = {
				character_event = { id = ExIs.109 }
			}
		}
	}
}

# Christians Welcomed Back
narrative_event = {
	id = ExIs.108
	title = EVTNAME_ExIs_108
	desc = EVTDESC_ExIs_108
	picture = GFX_evt_jewish_market
	border = GFX_event_narrative_frame_religion
	major = no
	
	is_triggered_only = yes
	
	hide_from = yes
	
	option = {
		name = EVTOPTA_ExIs_108
		prestige = 50
		hidden_tooltip = {
			any_realm_lord = {
				limit = { ai = no }
				character_event = { id = ExIs.110 }
			}
		}
	}
}

# Christians Expelled (Notifier for Vassals)
character_event = {
	id = ExIs.109
	title = EVTNAME_ExIs_109
	desc = EVTDESC_ExIs_109
	picture = GFX_evt_jewish_market
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExI_109
	}
}

# Christians Welcomed Back (Notifier for Vassals)
character_event = {
	id = ExIs.110
	title = EVTNAME_ExIs_110
	desc = EVTDESC_ExIs_110
	picture = GFX_evt_jewish_market
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExIs_110
	}
}

#Jewish Celebrations
#Purim Celebration
character_event = {
	id = ExIs.112
	title = EVTNAME_ExIs_112
	desc = EVTDESC_ExIs_112
	picture = GFX_evt_synagogue
	border = GFX_event_normal_frame_religion
		
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
			name = EVTOPTA_ExIs_112
			add_character_modifier = {
			name = held_purim_timer
			duration = 1825
			hidden = yes
		}
	}
}	

#Rosh Hashanah Celebration
character_event = {
	id = ExIs.113
	title = EVTNAME_ExIs_113
	desc = EVTDESC_ExIs_113
	picture = GFX_evt_synagogue
	border = GFX_event_normal_frame_religion
		
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
			name = EVTOPTA_ExIs_113
			add_character_modifier = {
			name = held_rosh_hashanah_timer
			duration = 1825
			hidden = yes
		}
	}
}

#Observance of Yom Kippur
narrative_event = {
	id = ExIs.114
	title = EVTNAME_ExIs_114
	desc = EVTDESC_ExIs_114
	picture = GFX_evt_synagogue
	border = GFX_event_narrative_frame_religion
	
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExIs_114
		add_character_modifier = {
			name = held_yom_kippur_timer
			duration = 1825
			hidden = yes
		}
	}
}
	
	#Jewish Coming of Age Events
#Bar Mitzvah (Child's event)
character_event = {
	id = ExIs.115
	title = EVTNAME_ExIs_115
	desc = EVTDESC_ExIs_115
	picture = GFX_evt_son_asking_father
	border = GFX_event_normal_frame_religion
	
	trigger = {
		any_child = {
				min_age = 13
				is_female = no
				religion_group = jewish_group
		}
			NOT = {
				age = 15
				trait = incapable
			}
	}
	
	
	weight_multiplier = {
		days = 1
	}
	
	option = {
			name = EVTOPTA_ExIs_115
				mother = {
					character_event = { id = ExIs.116 }
				}
				father = { 
					character_event = { id = ExIs.116 }
				}
				prestige = 100				
					
	}
}
	
#Bar Mitzvah (Notifier for Parent)
character_event = {
	id = ExIs.116
	title = EVTNAME_ExIs_116
	desc = EVTDESC_ExIs_116
	picture = GFX_evt_son_asking_father
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
		

	option = {
			name = EVTOPTA_ExIs_116
			prestige = 100
		}
}
	
#Bat Mitzvah (Child's event)
character_event = {
	id = ExIs.117
	title = EVTNAME_ExIs_117
	desc = EVTDESC_ExIs_117
	picture = GFX_evt_daughter_asking_father
	border = GFX_event_normal_frame_religion
	
	trigger = {
		any_child = {
				min_age = 12
				is_female = yes
				religion_group = jewish_group
			
			NOT = {
				age = 15
				trait = incapable
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	option = {
			name = EVTOPTA_ExIs_117
				mother = {
					character_event = { id = ExIs.118 }
				}
				father = { 
					character_event = { id = ExIs.118 }
				}
				prestige = 100		
	}
}

#Bat Mitzvah (Notifier for Parent)
character_event = {
	id = ExIs.118
	title = EVTNAME_ExIs_118
	desc = EVTDESC_ExIs_118
	picture = GFX_evt_daughter_asking_father
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
		
	option = {
			name = EVTOPTA_ExIs_118
			prestige = 100
		}
}

####Rebuilding Jerusalem
province_event = {
	id = ExIs.121
	title = "EVTNAME_ExIs_121"
	desc = "EVTDESC_ExIs_121"
	picture = "GFX_persepolis_ruin"
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_ExIs_121" # Rebuild just the royal palace.
		wealth = -1000
		774 = {
			AND = {
				add_province_modifier = { name = "rebuilding_jerusalem_local" duration = 730 }
				add_province_modifier = { local_revolt_risk = -0.5 duration = -1 }
			}
			character_event = { id = ExIs.122 days = 730}
		}
	}

	option = {
		name = "EVTOPTB_ExIs_121" # Rebuild the entire city.
		wealth = -3000
		774 = {
			AND = {
				add_province_modifier = { name = "rebuilding_jerusalem_local" duration = 1460 }
				add_province_modifier = { tax_income = 0.25 duration = -1 }
			}
		}
		character_event = { id = ExIs.122 days = 1460}
	}

	option = {
		name = "EVTOPTC_ExIs_121" # Make it the greatest city there ever was!
		wealth = -5000
		immediate = {
			if = {
				limit = { has_building = ca_town_6 }
				add_building = { ca_town_7 }
			}
		}
		774 = {
			AND = {
				add_province_modifier = { name = "rebuilding_jerusalem_local" duration = 2920 }
				add_province_modifier = { tax_income = 0.75 duration = -1 }
				add_province_modifier = { local_revolt_risk = -0.5 duration = -1 }
			}
		}
		character_event = { id = ExIs.122 days = 2920}
	}
}

####Rebuild Jerusalem 2
character_event = {
	id = ExIs.122
	title = "EVTNAME_ExIs_122"
	desc = "EVTDESC_ExIs_122"
	picture = "GFX_persepolis_built"
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_ExIs_122" #Upper City
		prestige = 500
		wealth = -3000
		set_global_flag = jerusalem_rebuilt
		b_mirabel = { set_name = Ayar David }
		774 = {
			AND = {
				add_province_modifier = { name = "jerusalem_upper_city" duration = -1 }
				add_province_modifier = { monthly_character_prestige = 0.5 duration = -1 }
			}
		}
	}
	option = {
		name = "EVTOPTB_ExIs_122" #Lower City
		prestige = 500
		wealth = -1000
		set_global_flag = jerusalem_rebuilt
		b_mirabel= { set_name = Ayar David }
		774 = {
			AND = {
				add_province_modifier = { name = "jerusalem_lower_city" duration = -1 }
				add_province_modifier = { monthly_character_prestige = 0.25 duration = -1 }
			}
		}
	}
	option = {
		name = "EVTOPTC_ExIs_122" #Gates of Jerusalem
		prestige = 500
		wealth = -4000
		set_global_flag = jerusalem_rebuilt
		b_mirabel = { set_name = Ayar David }
		774 = {
			AND = {
				add_province_modifier = { name = "jerusalem_gates" duration = -1 }
				add_province_modifier = { monthly_character_prestige = 0.75 duration = -1 }
			}
		}
	}
}

#Siqariqim Destroyed
narrative_event = {
	id = ExIs.123
	title = EVTNAME_ExIs_123
	desc = EVTDESC_ExIs_123
	picture = GFX_evt_shadow
	border = GFX_event_narrative_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExIs_123 #Siqariqim Destroyed
		prestige = -100
		piety = -100
		wealth = -500
	}
}

#Siqariqim Rebuilt
narrative_event = {
	id = ExIs.124
	title = EVTNAME_ExIs_124
	desc = EVTDESC_ExIs_124
	picture = GFX_evt_shadow
	border = GFX_event_narrative_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ExIs_124 #Siqariqim Rebuilt
		prestige = 100
		piety = 100
		wealth = -750
	}
}
	
#Jerusalem Event Troops
character_event = {
	id = ExIs.125
	title = EVTNAME_ExIs_125
	desc = EVTDESC_ExIs_125
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
		option = {
			name = EVTOPTA_ExIs_125
			set_global_flag = war_troops
			spawn_unit = {
				owner = ROOT
				province = ROOT
				home = ROOT
				troops = {
					archers = { 2500 2500 }
					light_infantry = { 2500 2500 }
					heavy_infantry = { 2500 2500 }
					light_cavalry = { 2500 2500 }
				}
				attrition = 0.50
				maintenance_multiplier = 0.01
			}
		}
}

#Jewish Celebrations
#Purim Celebration
character_event = {
	id = ExIs.1103
	title = EVTNAME_ExIs_1103
	desc = EVTDESC_ExIs_1103
	picture = GFX_evt_synagogue
	border = GFX_event_normal_frame_religion
		
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
			name = EVTOPTA_ExIs_1103
			add_character_modifier = {
			name = held_sukkot_timer
			duration = 1825
			hidden = yes
		}
	}
}	
character_event = {
	id = ExIs.1104
	title = EVTNAME_ExIs_1104
	desc = EVTDESC_ExIs_1104
	picture = GFX_evt_synagogue
	border = GFX_event_normal_frame_religion
		
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
			name = EVTOPTA_ExIs_1104
			add_character_modifier = {
			name = held_shavuot_timer
			duration = 1825
			hidden = yes
		}
	}
}

character_event = {
	id = ExIs.1105
	title = EVTNAME_ExIs_1105
	desc = EVTDESC_ExIs_1105
	picture = GFX_evt_synagogue
	border = GFX_event_normal_frame_religion
		
	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
			name = EVTOPTA_ExIs_1105
			add_character_modifier = {
			name = held_hanukkah_timer
			duration = 1825
			hidden = yes
		}
	}
}

#Bar Mitzvah (Child's event)
character_event = {
	id = ExIs.1107
	title = EVTNAME_ExIs_115
	desc = EVTDESC_ExIs_115
	picture = GFX_evt_son_asking_father
	border = GFX_event_normal_frame_religion
	
	trigger = {
		any_child = {
				min_age = 0
				is_female = no
				religion_group = jewish_group
		}
		NOT = {
			has_character_flag = circumcised
		}
	}
	
	
	weight_multiplier = {
		days = 7
	}
	
	option = {
			name = EVTOPTA_ExIs_115
				mother = {
					character_event = { id = ExIs.1106 }
				}
				father = { 
					character_event = { id = ExIs.1106 }
				}
				piety = 50
				prestige = 25
				set_character_flag = circumcised			
					
	}
}
	
#Bar Mitzvah (Notifier for Parent)
character_event = {
	id = ExIs.1106
	title = EVTNAME_ExIs_116
	desc = EVTDESC_ExIs_116
	picture = GFX_evt_son_asking_father
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
		

	option = {
			name = EVTOPTA_ExIs_116
			piety = 100
			prestige = 50
		}
}
	